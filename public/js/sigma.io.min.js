!function e(t,a,n){function i(r,s){if(!a[r]){if(!t[r]){var d="function"==typeof require&&require;if(!s&&d)return d(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var c=a[r]={exports:{}};t[r][0].call(c.exports,function(e){var a=t[r][1][e];return i(a?a:e)},c,c.exports,e,t,a,n)}return a[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t){(function(){"use strict";var t=window,a=t.Sigma={};a.host="http://192.168.0.1",a.port=1337,a.socket=io.connect(a.host),a.clickAndTouchListener=e("./modules/clickAndTouchListener.js"),a.disableMouseWheelAndTouchMove=e("./modules/disableMouseWheelAndTouchMove.js"),a.connectOrCreateButton=e("./modules/connectOrCreateButton.js"),a.date=e("./modules/date.js"),a.addContent=e("./modules/addContent.js"),a.updateContent=e("./modules/updateContent.js"),a.deleteContent=e("./modules/deleteContent.js"),a.preventPasting=e("./modules/preventPasting.js"),a.dragAndDrop=e("./modules/dragAndDrop.js"),a.storeImage=e("./modules/storeImage.js"),a.loadResponsiveImages=e("./modules/loadResponsiveImages.js"),a.asyncUserAndHistoryState=e("./modules/asyncUserAndHistoryState.js"),a.makeOwnerArticlesEditable=e("./modules/makeOwnerArticlesEditable.js"),a.observeWidth=e("./modules/observeWidth.js"),a.attachTools=e("./modules/attachTools.js"),a.setObservers=e("./modules/setObservers.js"),a.droppedImages=e("./modules/droppedImages.js"),a.simpleCounter=e("./modules/simpleCounter.js"),a.synchronize=e("./modules/synchronize.js"),a.contentEditing=e("./modules/contentEditing.js"),a.getChannelId=e("./modules/getChannelId.js"),a.getMongoId=e("./modules/getMongoId.js"),a.changeId=e("./modules/changeId.js"),a.getTempId=e("./modules/getTempId.js"),a.listen=e("./modules/listen.js"),a.disconnectObservers=e("./modules/disconnectObservers.js"),a.getHistory=e("./modules/getHistory.js"),a.tryLocalStorage=e("./modules/tryLocalStorage.js"),a.heroHeader=e("./modules/heroHeader.js"),a.navigation=e("./modules/navigation.js"),a.animationListener=e("./modules/animationListener.js"),a.signIn=e("./modules/signIn.js"),a.signUp=e("./modules/signUp.js"),a.userIsConnected=e("./modules/userIsConnected.js"),a.highlightUserArticles=e("./modules/highlightUserArticles.js"),a.manageMessage=e("./modules/manageMessage.js"),a.getSocketMessage=e("./modules/getSocketMessage.js"),a.saveManager=e("./modules/saveManager.js"),a.isOnLine=e("./modules/isOnLine.js"),a.ready=function(){var e=function(){a.observeWidth(),a.getChannelId(),a.getMongoId(),a.getHistory(),a.tryLocalStorage.init(),a.getSocketMessage(),a.saveManager.init(),a.preventPasting(),a.dragAndDrop()};document.addEventListener("DOMContentLoaded",e,!1)}()}).call(window),t.exports=function(e,t,a,n,i){var o=document.querySelector("main"),r=o.querySelector(".row:first-child"),s=null!==r?r.children.length:0,d=document.createElement("article");if(d.setAttribute("data-structure","article"),d.setAttribute("class","cell"),e)d.dataset.idType="const",d.dataset.mongoId=t,d.innerHTML=e;else{var c=document.createElement("h1");c.setAttribute("data-sigma","title"),c.setAttribute("contenteditable","true"),c.appendChild(document.createTextNode(a));var m=document.createElement("h2");m.setAttribute("data-owner",i),m.appendChild(document.createTextNode(i));var u=document.createElement("time");u.appendChild(document.createTextNode(Sigma.date.now())),u.setAttribute("datetime",Sigma.date.html());var l=document.createElement("article");l.setAttribute("data-sigma","content"),l.setAttribute("contenteditable","true"),l.appendChild(document.createTextNode(n)),d.appendChild(c),d.appendChild(m),d.appendChild(u),d.appendChild(l)}if(0===s||3===s){var g=document.createElement("div");g.setAttribute("class","row"),o.insertBefore(g,o.firstChild),g.appendChild(d)}else r.insertBefore(d,r.firstChild)},t.exports=function(e,t,a,n){var i=["animation","webkitAnimation","MSAnimation","oAnimation"],o=function(t){return t+("animation"===t?e?"end":"start":e?"End":"Start")},r=i.map(o),s=function(){var e=this;a(),n&&r.forEach(function(t){e.removeEventListener(t,s,!1)})};r.forEach(function(e){t.addEventListener(e,s,!1)})},t.exports={modulesLoaded:0,makeLiveForUser:function(){Sigma.makeOwnerArticlesEditable(),Sigma.attachTools(),Sigma.connectOrCreateButton(!1),Sigma.highlightUserArticles(),Sigma.manageMessage(!0,"Hi "+Sigma.username+"! Nice to see you there!",!0)},check:function(){++this.modulesLoaded,2===this.modulesLoaded&&this.makeLiveForUser()}},t.exports=function(){for(var e=document.querySelectorAll("[data-sigma]"),t=function(t){var a=e[t].parentNode.querySelector("[data-owner]").dataset.owner;Sigma.username===a&&Sigma.contentEditing.status(e[t])},a=0;a<e.length;++a)t(a)},t.exports=function(e,t,a){var n='[data-mongo-id="'+e+'"]',i=document.querySelector(n),o=i.innerHTML;switch(i.dataset.idType="const",i.dataset.mongoId=t,a){case"article":Sigma.socket.emit(Sigma.getChannelId,{action:"update",mongoId:t,html:o,owner:Sigma.username});break;case"image":i.src=Sigma.host+":"+Sigma.port+"/data/"+t}},t.exports={functions:{},preventClickIfTouch:function(e){"touchstart"===e.type&&e.preventDefault()},add:function(e,t,a,n){var i=this,o=a;n=n||!1,i.functions[t]=function(e){n||i.preventClickIfTouch(e),o(e)},e.addEventListener("click",i.functions[t],!1),e.addEventListener("touchstart",i.functions[t],!1)},remove:function(e,t){var a=this;e.removeEventListener("click",a.functions[t],!1),e.removeEventListener("touchstart",a.functions[t],!1)}},t.exports=function(e){var t=function(e){var t=document.querySelector("nav"),a=document.createElement("a"),n=document.createElement("span"),i=function(){if("connect"===e)Sigma.signIn.isVisible||(Sigma.signIn.init(),Sigma.signUp.init(),Sigma.navigation.hide());else{var t="An editable title!",a="Here goes the content of your lovely article. You can directly drag & drop images here!";Sigma.disconnectObservers(),Sigma.addContent(!1,void 0,t,a,Sigma.username),Sigma.attachTools(),Sigma.highlightUserArticles(),Sigma.setObservers()}};a.setAttribute("href","#"),a.setAttribute("class",e),t.lastChild.appendChild(a),a.appendChild(n),n.appendChild(document.createTextNode(e)),Sigma.clickAndTouchListener.add(a,"addFormOrCreate",i)},a=function(e){var t="."+e,a=document.querySelector(t);null!==a&&(Sigma.clickAndTouchListener.remove(a,"addFormOrCreate"),a.parentNode.removeChild(a))};e?(void 0===Sigma.connectOrCreateStatus||Sigma.connectOrCreateStatus!==!0)&&(Sigma.connectOrCreateStatus=!0,a("create"),t("connect")):(void 0===Sigma.connectOrCreateStatus||Sigma.connectOrCreateStatus!==!1)&&(Sigma.connectOrCreateStatus=!1,a("connect"),t("create"))},t.exports={eraseIt:function(){var e=Sigma.contentEditing.target.current,t=e.dataset.mongoId;e.parentNode.removeChild(e),Sigma.socket.emit(Sigma.getChannelId,{action:"delete",mongoId:t})},addTools:function(e){var t=Sigma.contentEditing,a=document.createElement("div"),n=document.createElement("a"),i=document.createElement("a"),o=t.setArticle(e.target);a.setAttribute("class","tools"),n.setAttribute("class","close"),n.setAttribute("href","#"),n.setAttribute("data-tooltip","close"),i.setAttribute("class","erase"),i.setAttribute("href","#"),i.setAttribute("data-tooltip","erase"),o.appendChild(a),a.appendChild(n),a.appendChild(i),Sigma.clickAndTouchListener.add(n,"removeTools",t.removeTools),Sigma.clickAndTouchListener.add(i,"eraseIt",t.eraseIt),t.formerTarget=e.target.parentNode},manageTools:function(e){var t=Sigma.contentEditing,a=document.querySelector(".tools");if(null===a)t.addTools(e);else{var n=t.setArticle(a);t.target.current!==n&&(a.parentNode.removeChild(a),t.addTools(e));var i=document.querySelector(".erase");Sigma.clickAndTouchListener.remove(i,"eraseIt"),Sigma.clickAndTouchListener.add(i,"eraseIt",t.eraseIt)}},removeTools:function(){var e=document.querySelector(".tools");e.parentNode.removeChild(e)},setArticle:function(e){var t;return t="article"!==e.parentNode.dataset.structure?e.parentNode.parentNode:e.parentNode},editMode:function(e){var t=e.target.parentNode;t.classList.toggle("editMode"),Sigma.contentEditing.target.add=t},viewMode:function(e){var t=e.target.parentNode;t.classList.remove("editMode"),t.querySelector("time").setAttribute("datetime",Sigma.date.html()),t.querySelector("time").innerText=Sigma.date.now(),Sigma.droppedImages.delete()},status:function(e){var t=this;e.addEventListener("focus",this.editMode,!0),e.addEventListener("blur",this.viewMode,!0),Sigma.clickAndTouchListener.add(e,"manageTools",t.manageTools,!0)},target:{history:[],set add(e){this.history.push(e),this.history.length>2&&this.history.shift()},get add(){},get current(){return this.history[this.history.length-1]},get former(){return 2===this.history.length?this.history[0]:null}}},t.exports={now:function(){var e,t=new Date,a=t.getHours(),n=t.getMinutes();12>a?e="am":(e="pm",a-=12),10>n&&(n="0"+n);var i="today "+a+":"+n+" "+e;return i},html:function(){return(new Date).toISOString()}},t.exports=function(e){var t='[data-mongo-id="'+e+'"]',a=document.querySelector(t);null!==a&&a.parentNode.removeChild(a)},t.exports=function(e,t){var a=function(e){e.preventDefault()};t?(e.addEventListener("mousewheel",a,!1),e.addEventListener("touchmove",a,!1)):(e.removeEventListener("mousewheel",a,!1),e.removeEventListener("touchmove",a,!1))},t.exports=function(){Sigma.observers.forEach(function(e){e.disconnect()});for(var e=document.querySelectorAll("[data-sigma]"),t=0;t<e.length;++t)e[t].removeEventListener("focus",Sigma.contentEditing.editMode,!0),e[t].removeEventListener("blur",Sigma.contentEditing.viewMode,!0)},t.exports=function(){var e=function(e,t){var a,n=document.createElement("canvas"),i=n.getContext("2d");if(t){var o,r,s,d,c=120,m=document.createElement("canvas"),u=m.getContext("2d");e.width>e.height?(o=(e.width-e.height)/2,r=0,s=e.height,d=s):e.height>e.width?(o=0,r=(e.height-e.width)/2,s=e.width,d=s):(o=r=0,s=d=e.width),n.width=n.height=c,m.width=m.height=c,u.drawImage(e,o,r,s,d,0,0,c,c),i.clearRect(0,0,c,c),i.beginPath(),i.arc(c/2,c/2,c/2-2,0,2*Math.PI,!0),i.fillStyle=i.createPattern(m,"no-repeat"),i.fill();var l=i.createLinearGradient(0,0,0,150);l.addColorStop(0,"rgba(229, 86, 109, .7)"),l.addColorStop(.25,"rgba(225, 98, 158, .7)"),l.addColorStop(.5,"rgba(195, 104, 213, .7)"),l.addColorStop(.75,"rgba(146, 94, 202, .7)"),l.addColorStop(1,"rgba(108, 83, 181, .7)"),i.lineWidth=2,i.strokeStyle=l,i.stroke(),a=n.toDataURL("image/png")}else{var g=600,h=1e3;e.width>h&&(e.height*=h/e.width,e.width=h),e.height>g&&(e.width*=g/e.height,e.height=g),n.width=e.width,n.height=e.height,i.clearRect(0,0,n.width,n.height),i.drawImage(e,0,0,e.width,e.height),a=n.toDataURL("image/jpeg",.7)}return a},t=function(t,a){if(t.type.match(/image.*/)){var n=document.createElement("img"),i=new FileReader;a.target.parentNode.querySelector('[data-sigma="content"]').appendChild(n),i.readAsArrayBuffer(t),i.onload=function(t){window.URL=window.URL||window.webkitURL;var a=new Blob([new Uint8Array(t.target.result)]),i=window.URL.createObjectURL(a),o=new Image;o.src=i,o.onload=function(){var t=Sigma.getTempId(),a=document.querySelector("[data-app-width]").dataset.appWidth,i=e(o,!0),r=e(o,!1);n.dataset.image="dropped",n.dataset.idType="tmp",n.dataset.mongoId=t,n.dataset.imageWidth="small"===a?"small":"large",Sigma.storeImage(t,i,r)}}}},a=function(){var e=event.dataTransfer.getData("text/plain");event.target.textContent+=" "+e};window.addEventListener("dragenter",function(e){e.preventDefault();var t=e.target.hasAttribute("data-sigma")?!0:!1;t&&e.target.focus()},!1),window.addEventListener("dragleave",function(e){e.preventDefault();var t=e.target.hasAttribute("data-sigma")?!0:!1;t&&e.target.blur()},!1),window.addEventListener("dragover",function(e){e.preventDefault()},!1),window.addEventListener("drop",function(e){e.preventDefault();var n=e.dataTransfer.files,i=e.target.hasAttribute("data-sigma")?!0:!1;if(i)if(0!==n.length)for(var o=0;o<n.length;++o)t(n[o],e);else a();e.target.focus()},!1)},t.exports={removedImageIds:[],lookAtMutations:function(e){var t=e.addedNodes,a=e.removedNodes,n=e.type,i=this,o=function(e,t){var a=function(){e?i.removedImageIds.splice(i.removedImageIds.indexOf(t[r].dataset.mongoId),1):i.removedImageIds.push(t[r].dataset.mongoId)},o=function(e){if("#text"!==t[e].nodeName)t[e].hasAttribute("data-image")&&a();else if(t[e].hasChildNodes())for(var n=t[e].querySelectorAll("[data-image]"),i=0;i<n.length;++i)a()};if(t.length>0&&"childList"===n)for(var r=0;r<t.length;++r)o(r)};o(!1,a),o(!0,t)},"delete":function(){this.removedImageIds.length>0&&(Sigma.socket.emit("deleteImage",{ids:this.removedImageIds}),this.updateImageArray())},updateImageArray:function(){var e=this;Sigma.socket.on("updateImageArray",function(t){e.removedImageIds=t.array})}},t.exports=function(){Sigma.socket.on("id",function(e){Sigma.getChannelId=e.id,Sigma.listen()})},t.exports=function(){Sigma.socket.on("history",function(e){if(e.empty){var t="Welcome here pioneer!",a="It seems that you are the very first person on that channel.";a+=void 0!==Sigma.username?" Please edit that content to make it yours!":" Please identify yourself!",Sigma.addContent(!1,void 0,t,a,Sigma.username||"Sigma")}else e.documents.forEach(function(e){Sigma.addContent(e.html,e._id)});Sigma.setObservers(),Sigma.asyncUserAndHistoryState.check()})},t.exports=function(){Sigma.socket.on("mongoId",function(e){Sigma.changeId(e.tempId,e.id,e.type)})},t.exports=function(){Sigma.socket.on("socketMessage",function(e){Sigma.manageMessage(!0,e.message,e.type)})},t.exports=function(){for(var e=window.crypto.getRandomValues(new Uint32Array(8)),t="",a=0;a<e.length;++a)t+=e[a].toString(16),a<e.length-1&&(t+="-");return t},t.exports={add:function(){if(void 0===this.isVisible||!this.isVisible){var e=document.querySelector("body"),t=document.querySelector("main"),a=document.createElement("header"),n=document.createElement("h1");e.insertBefore(a,t),a.setAttribute("class","hero"),a.appendChild(n),n.appendChild(document.createTextNode("Create and share data in true real-time.")),this.isVisible=!0}},remove:function(){if(void 0===this.isVisible||!this.isVisible){var e=document.querySelector("header");e.parentNode.removeChild(e),this.isVisible=!1}}},t.exports=function(){for(var e='[data-owner="'+Sigma.username+'"]',t=document.querySelectorAll(e),a=function(e){t[e].parentNode.classList.add("isYours")},n=0;n<t.length;++n)a(n)},t.exports=function(){return"onLine"in navigator?navigator.onLine:void 0},t.exports=function(){Sigma.socket.on("broadcast",function(e){switch(Sigma.disconnectObservers(),e.action){case"create":Sigma.addContent(e.html,e.id);break;case"update":Sigma.updateContent(e.html,e.id);break;case"delete":Sigma.deleteContent(e.id)}Sigma.setObservers(),Sigma.loadResponsiveImages()})},t.exports=function(){for(var e=document.querySelector("[data-app-width]"),t=document.querySelectorAll("[data-image]"),a=function(a){t[a].dataset.imageWidth=e.dataset.appWidth;var n=Sigma.host+":"+Sigma.port+"/data/"+t[a].dataset.mongoId+"/"+e.dataset.appWidth;t[a].setAttribute("src",n)},n=0;n<t.length;++n)a(n)},t.exports=function(){for(var e=document.querySelectorAll("[data-sigma]"),t=function(t){var a=e[t].parentNode.querySelector("[data-owner]").dataset.owner;a===Sigma.username&&(e[t].contentEditable="true")},a=0;a<e.length;++a)t(a)},t.exports=function(e,t,a){var n=document.querySelector("[data-message]"),i=a?"confirmation":"alert",o=function(){n&&n.parentNode.removeChild(n)},r=function(){if(n)n.dataset.message=i,n.innerHTML=t;else{var e=document.createElement("span"),a=function(e){var t=e.target,a=function(){t.parentNode.removeChild(t)};t.classList.add("removeMessage"),Sigma.animationListener(!0,t,a,!0)};e.dataset.message=i,e.innerHTML=t,Sigma.navigation.visibility||e.classList.add("withNoNavigation");var o=document.querySelector("body");o.appendChild(e),Sigma.clickAndTouchListener.add(e,"eraseMessage",a)}};e?r():o()},t.exports={visibility:!0,hide:function(){var e=document.querySelector("nav"),t=document.querySelector("[data-message]");e.classList.add("removeNavigation"),this.visibility=!1,t&&t.classList.add("withNoNavigation")},show:function(){var e=document.querySelector("nav"),t=document.querySelector("[data-message]");e.classList.remove("removeNavigation"),this.visibility=!0,t&&t.classList.remove("withNoNavigation")}},t.exports=function(){var e,t=document.querySelector("[data-app-width]"),a=function(a){e[a].dataset.imageWidth=t.dataset.appWidth;var n=Sigma.host+":"+Sigma.port+"/data/"+e[a].dataset.mongoId+"/"+t.dataset.appWidth;e[a].setAttribute("src",n)},n=function(){var n=window.getComputedStyle(t,"::after").getPropertyValue("content"),i=n.replace(/\"/g,"");t.dataset.appWidth=Sigma.deviceWidth=i,e=document.querySelectorAll("[data-image-width]");for(var o=0;o<e.length;++o)a(o)};Sigma.animationListener(!1,t,n,!1)},t.exports=function(){window.addEventListener("paste",function(e){Sigma.manageMessage(!0,"Pasting is currently not supported due to cross-browser limitations. Use drag and drop instead.",!1),e.preventDefault()},!1)},t.exports={pool:[],init:function(){Sigma.socket.on("saveState",function(e){void 0!==e.tempId?Sigma.saveManager.toggleState(e.tempId,e.state):void 0!==e.id&&Sigma.saveManager.toggleState(e.id,e.state)})},add:function(e,t){var a=this.find(e);null===a?this.pool.push([e,t]):this.pool[a][1]=t},find:function(e){var t=function(e){return e[0]},a=this.pool.map(t).indexOf(e);return-1!==a?a:null},showSaveState:function(){console.log("S A V E D !!!")},toggleId:function(e,t){var a=this.find(e);null!==a&&(this.pool[a][0]=t)},toggleState:function(e,t){var a=this.find(e);null!==a&&(this.pool[a][1]=t,this.showSaveState())}},t.exports=function(){for(var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=[],a=document.querySelectorAll("[data-sigma]"),n=function(n){t[n]=new e(function(e){e.forEach(function(e){"IMG"!==e.target.nodeName&&(Sigma.synchronize(),Sigma.loadResponsiveImages()),Sigma.droppedImages.lookAtMutations(e)})}),t[n].observe(a[n],{attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,subtree:!0,characterDataOldValue:!0})},i=0;i<a.length;++i)n(i);Sigma.observers=t},t.exports={addForm:function(){var e=this,t=document.querySelector("body"),a=document.createElement("aside"),n=document.createElement("form"),i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("label"),s=document.createElement("label"),d=document.createElement("input"),c=document.createElement("input"),m=document.createElement("span"),u=document.createElement("span"),l=document.createElement("button"),g=function(){var n=function(){a.parentNode.removeChild(a)};Sigma.animationListener(!0,a,n,!0),a.classList.add("removeAside"),t.classList.remove("noScroll"),Sigma.navigation.show(),Sigma.disableMouseWheelAndTouchMove(t,!1),e.isVisible=!1,Sigma.manageMessage(!1)};n.setAttribute("class","signIn"),n.setAttribute("data-validation","Username and password must be 6 characters long with no white space! Password must contain at least 1 digit!"),i.setAttribute("class","usernameUberInput"),o.setAttribute("class","passwordUberInput"),d.setAttribute("class","username"),d.setAttribute("type","text"),d.setAttribute("placeholder","Username"),d.setAttribute("autofocus",""),c.setAttribute("class","password"),c.setAttribute("type","password"),c.setAttribute("placeholder","Password"),m.setAttribute("id","usernameInputState"),u.setAttribute("id","passwordInputState"),l.setAttribute("type","button"),l.setAttribute("class","cancel"),l.appendChild(document.createTextNode("cancel")),t.classList.toggle("noScroll"),t.insertBefore(a,t.firstChild),a.appendChild(n),n.appendChild(i),n.appendChild(o),i.appendChild(r),i.appendChild(d),i.appendChild(m),o.appendChild(s),o.appendChild(c),o.appendChild(u),n.appendChild(l),Sigma.signIn.form=n,Sigma.disableMouseWheelAndTouchMove(t,!0),Sigma.clickAndTouchListener.add(l,"returnHome",g)},checkForm:function(){var e=(document.querySelector("form"),document.querySelector(".username").value),t=document.querySelector(".password").value,a=document.querySelector("#usernameInputState"),n=document.querySelector("#passwordInputState"),i=new RegExp("^\\S{6,}$"),o=i.test(e),r=new RegExp("^(?=.*\\d)\\S{6,}$"),s=r.test(t),d=o&&s,c="",m=function(e){var t=document.querySelector("button[type=submit]");if(e){if(!t){var a=document.createElement("button");a.setAttribute("type","submit"),a.appendChild(document.createTextNode("sign in | up")),Sigma.signIn.form.appendChild(a)}}else t&&t.parentNode.removeChild(t)};d?(Sigma.signIn.username=e,Sigma.signIn.password=t,a.className=n.className="isOk",Sigma.manageMessage(!1),m(!0)):(o?""!==e&&(a.className="isOk"):""!==e?(c+="Username must be at least 6 characters long!",a.className="isErroneous"):a.className="",s?""!==t&&(n.className="isOk"):""!==t?(""!==c&&(c+=" "),c+="Password must be at least 6 characters long with one digit!",n.className="isErroneous"):n.className="",""!==c?Sigma.manageMessage(!0,c,!1):Sigma.manageMessage(!1),m(!1))},submit:function(e){e.preventDefault(),Sigma.socket.emit("signIn",{username:Sigma.signIn.username,password:Sigma.signIn.password})},init:function(){this.isVisible=!0,this.addForm(),this.form.addEventListener("input",this.checkForm,!1),this.form.addEventListener("submit",this.submit,!1)}},t.exports={submit:function(e){e.preventDefault(),Sigma.socket.emit("signUp",{username:Sigma.signIn.username,password:Sigma.signIn.password})},init:function(){Sigma.socket.on("signUp",function(e){Sigma.manageMessage(!0,"Unknown username! Want to sign up as "+e.username+"?",!0);var t=document.querySelector("button[type=submit]");t.innerText="sign up",t.classList.add("signUp"),Sigma.signIn.form.removeEventListener("submit",Sigma.signIn.submit,!1),Sigma.signIn.form.addEventListener("submit",Sigma.signUp.submit,!1)})}},t.exports={i:0,get value(){return++this.i,this.i}},t.exports=function(e,t,a){Sigma.socket.emit("storeImage",{tempId:e,smallImage:t,largeImage:a})},t.exports=function(){var e,t,a,n,i=document.activeElement.parentNode,o=i.cloneNode(!0),r=document.createDocumentFragment(),s="HTML"!==i.nodeName,d=function(e){n[e].removeAttribute("src"),n[e].removeAttribute("data-image-width")},c=function(e){editableElements[e].contentEditable="false"};r.appendChild(o),t=r.querySelector(".tools"),null!==t&&t.parentNode.removeChild(t),n=r.querySelectorAll("[data-image-width]");for(var m=0;m<n.length;++m)d(m);editableElements=r.querySelectorAll("[data-sigma]");for(var u=0;u<editableElements.length;++u)c(u);a=r.querySelector('[data-structure="article"]').innerHTML,document.hasFocus()&&s&&(i.hasAttribute("data-mongo-id")?"const"===i.dataset.idType?(e=i.dataset.mongoId,Sigma.socket.emit(Sigma.getChannelId,{action:"update",mongoId:e,html:a,owner:Sigma.username})):console.log("berp"):(i.dataset.idType="tmp",e=Sigma.getTempId(),i.dataset.mongoId=e,Sigma.socket.emit(Sigma.getChannelId,{action:"create",mongoId:e,html:a,owner:Sigma.username})),Sigma.saveManager.add(e,!1))},t.exports={changeUserInterfaceToSign:function(){Sigma.connectOrCreateButton(!0),Sigma.heroHeader.add(),Sigma.userIsConnected()},checkStorageState:function(){Sigma.tryLocalStorage.clearStorage(),Sigma.manageMessage(!0,"Unwanted LocalStorage change occured. LocalStorage has been cleared.",!1),Sigma.tryLocalStorage.changeUserInterfaceToSign()},clearStorage:function(){localStorage.clear()},init:function(){if("localStorage"in window){var e=this,t=void 0===localStorage.sigma?{username:void 0,password:void 0}:JSON.parse(localStorage.sigma);window.addEventListener("storage",e.checkStorageState,!1),Sigma.socket.on("localStorageState",function(a){a.secure?(Sigma.username=t.username,Sigma.asyncUserAndHistoryState.check()):(e.clearStorage(),Sigma.manageMessage(!0,"Wrong credentials were stored in local browser. Please sign in or sign up!",!1),e.changeUserInterfaceToSign())}),void 0!==t.username&&void 0!==t.password?Sigma.socket.emit("checkLocalStorage",{username:t.username,password:t.password}):(e.clearStorage(),e.changeUserInterfaceToSign())}else Sigma.manageMessage(!0,"LocalStorage is not supported!",!1)}},t.exports=function(e,t){var a='[data-mongo-id="'+t+'"]',n=document.querySelector(a);null!==n&&(n.innerHTML=e)},t.exports=function(){Sigma.socket.on("isConnected",function(e){var t=document.querySelector("aside"),a=document.querySelector("body"),n=function(){var e=function(){t.parentNode.removeChild(t)};Sigma.animationListener(!0,t,e,!0),t.classList.add("removeAside"),a.classList.remove("noScroll"),Sigma.navigation.show(),Sigma.disableMouseWheelAndTouchMove(a,!0),Sigma.signIn.isVisible=!1,Sigma.manageMessage(!1)};n(),Sigma.username=e.username,"localStorage"in window?localStorage.sigma=JSON.stringify({username:Sigma.username,password:e.password}):Sigma.manageMessage(!0,"LocalStorage is not supported!",!1),Sigma.asyncUserAndHistoryState.check(),Sigma.heroHeader.remove()})}},{"./modules/addContent.js":2,"./modules/animationListener.js":3,"./modules/asyncUserAndHistoryState.js":4,"./modules/attachTools.js":5,"./modules/changeId.js":6,"./modules/clickAndTouchListener.js":7,"./modules/connectOrCreateButton.js":8,"./modules/contentEditing.js":9,"./modules/date.js":10,"./modules/deleteContent.js":11,"./modules/disableMouseWheelAndTouchMove.js":12,"./modules/disconnectObservers.js":13,"./modules/dragAndDrop.js":14,"./modules/droppedImages.js":15,"./modules/getChannelId.js":16,"./modules/getHistory.js":17,"./modules/getMongoId.js":18,"./modules/getSocketMessage.js":19,"./modules/getTempId.js":20,"./modules/heroHeader.js":21,"./modules/highlightUserArticles.js":22,"./modules/isOnLine.js":23,"./modules/listen.js":24,"./modules/loadResponsiveImages.js":25,"./modules/makeOwnerArticlesEditable.js":26,"./modules/manageMessage.js":27,"./modules/navigation.js":28,"./modules/observeWidth.js":29,"./modules/preventPasting.js":30,"./modules/saveManager.js":31,"./modules/setObservers.js":32,"./modules/signIn.js":33,"./modules/signUp.js":34,"./modules/simpleCounter.js":35,"./modules/storeImage.js":36,"./modules/synchronize.js":37,"./modules/tryLocalStorage.js":38,"./modules/updateContent.js":39,"./modules/userIsConnected.js":40}],2:[function(e,t){t.exports=function(e,t,a,n,i){var o=document.querySelector("main"),r=o.querySelector(".row:first-child"),s=null!==r?r.children.length:0,d=document.createElement("article");if(d.setAttribute("data-structure","article"),d.setAttribute("class","cell"),e)d.dataset.idType="const",d.dataset.mongoId=t,d.innerHTML=e;else{var c=document.createElement("h1");c.setAttribute("data-sigma","title"),c.setAttribute("contenteditable","true"),c.appendChild(document.createTextNode(a));var m=document.createElement("h2");m.setAttribute("data-owner",i),m.appendChild(document.createTextNode(i));var u=document.createElement("time");u.appendChild(document.createTextNode(Sigma.date.now())),u.setAttribute("datetime",Sigma.date.html());var l=document.createElement("article");l.setAttribute("data-sigma","content"),l.setAttribute("contenteditable","true"),l.appendChild(document.createTextNode(n)),d.appendChild(c),d.appendChild(m),d.appendChild(u),d.appendChild(l)}if(0===s||3===s){var g=document.createElement("div");g.setAttribute("class","row"),o.insertBefore(g,o.firstChild),g.appendChild(d)}else r.insertBefore(d,r.firstChild)}},{}],3:[function(e,t){t.exports=function(e,t,a,n){var i=["animation","webkitAnimation","MSAnimation","oAnimation"],o=function(t){return t+("animation"===t?e?"end":"start":e?"End":"Start")},r=i.map(o),s=function(){var e=this;a(),n&&r.forEach(function(t){e.removeEventListener(t,s,!1)})};r.forEach(function(e){t.addEventListener(e,s,!1)})}},{}],4:[function(e,t){t.exports={modulesLoaded:0,makeLiveForUser:function(){Sigma.makeOwnerArticlesEditable(),Sigma.attachTools(),Sigma.connectOrCreateButton(!1),Sigma.highlightUserArticles(),Sigma.manageMessage(!0,"Hi "+Sigma.username+"! Nice to see you there!",!0)},check:function(){++this.modulesLoaded,2===this.modulesLoaded&&this.makeLiveForUser()}}},{}],5:[function(e,t){t.exports=function(){for(var e=document.querySelectorAll("[data-sigma]"),t=function(t){var a=e[t].parentNode.querySelector("[data-owner]").dataset.owner;Sigma.username===a&&Sigma.contentEditing.status(e[t])},a=0;a<e.length;++a)t(a)}},{}],6:[function(e,t){t.exports=function(e,t,a){var n='[data-mongo-id="'+e+'"]',i=document.querySelector(n),o=i.innerHTML;switch(i.dataset.idType="const",i.dataset.mongoId=t,a){case"article":Sigma.socket.emit(Sigma.getChannelId,{action:"update",mongoId:t,html:o,owner:Sigma.username});break;case"image":i.src=Sigma.host+":"+Sigma.port+"/data/"+t}}},{}],7:[function(e,t){t.exports={functions:{},preventClickIfTouch:function(e){"touchstart"===e.type&&e.preventDefault()},add:function(e,t,a,n){var i=this,o=a;n=n||!1,i.functions[t]=function(e){n||i.preventClickIfTouch(e),o(e)},e.addEventListener("click",i.functions[t],!1),e.addEventListener("touchstart",i.functions[t],!1)},remove:function(e,t){var a=this;e.removeEventListener("click",a.functions[t],!1),e.removeEventListener("touchstart",a.functions[t],!1)}}},{}],8:[function(e,t){t.exports=function(e){var t=function(e){var t=document.querySelector("nav"),a=document.createElement("a"),n=document.createElement("span"),i=function(){if("connect"===e)Sigma.signIn.isVisible||(Sigma.signIn.init(),Sigma.signUp.init(),Sigma.navigation.hide());else{var t="An editable title!",a="Here goes the content of your lovely article. You can directly drag & drop images here!";Sigma.disconnectObservers(),Sigma.addContent(!1,void 0,t,a,Sigma.username),Sigma.attachTools(),Sigma.highlightUserArticles(),Sigma.setObservers()}};a.setAttribute("href","#"),a.setAttribute("class",e),t.lastChild.appendChild(a),a.appendChild(n),n.appendChild(document.createTextNode(e)),Sigma.clickAndTouchListener.add(a,"addFormOrCreate",i)},a=function(e){var t="."+e,a=document.querySelector(t);null!==a&&(Sigma.clickAndTouchListener.remove(a,"addFormOrCreate"),a.parentNode.removeChild(a))};e?(void 0===Sigma.connectOrCreateStatus||Sigma.connectOrCreateStatus!==!0)&&(Sigma.connectOrCreateStatus=!0,a("create"),t("connect")):(void 0===Sigma.connectOrCreateStatus||Sigma.connectOrCreateStatus!==!1)&&(Sigma.connectOrCreateStatus=!1,a("connect"),t("create"))}},{}],9:[function(e,t){t.exports={eraseIt:function(){var e=Sigma.contentEditing.target.current,t=e.dataset.mongoId;e.parentNode.removeChild(e),Sigma.socket.emit(Sigma.getChannelId,{action:"delete",mongoId:t})},addTools:function(e){var t=Sigma.contentEditing,a=document.createElement("div"),n=document.createElement("a"),i=document.createElement("a"),o=t.setArticle(e.target);a.setAttribute("class","tools"),n.setAttribute("class","close"),n.setAttribute("href","#"),n.setAttribute("data-tooltip","close"),i.setAttribute("class","erase"),i.setAttribute("href","#"),i.setAttribute("data-tooltip","erase"),o.appendChild(a),a.appendChild(n),a.appendChild(i),Sigma.clickAndTouchListener.add(n,"removeTools",t.removeTools),Sigma.clickAndTouchListener.add(i,"eraseIt",t.eraseIt),t.formerTarget=e.target.parentNode},manageTools:function(e){var t=Sigma.contentEditing,a=document.querySelector(".tools");if(null===a)t.addTools(e);else{var n=t.setArticle(a);t.target.current!==n&&(a.parentNode.removeChild(a),t.addTools(e));var i=document.querySelector(".erase");Sigma.clickAndTouchListener.remove(i,"eraseIt"),Sigma.clickAndTouchListener.add(i,"eraseIt",t.eraseIt)}},removeTools:function(){var e=document.querySelector(".tools");e.parentNode.removeChild(e)},setArticle:function(e){var t;return t="article"!==e.parentNode.dataset.structure?e.parentNode.parentNode:e.parentNode},editMode:function(e){var t=e.target.parentNode;t.classList.toggle("editMode"),Sigma.contentEditing.target.add=t},viewMode:function(e){var t=e.target.parentNode;t.classList.remove("editMode"),t.querySelector("time").setAttribute("datetime",Sigma.date.html()),t.querySelector("time").innerText=Sigma.date.now(),Sigma.droppedImages.delete()},status:function(e){var t=this;e.addEventListener("focus",this.editMode,!0),e.addEventListener("blur",this.viewMode,!0),Sigma.clickAndTouchListener.add(e,"manageTools",t.manageTools,!0)
},target:{history:[],set add(e){this.history.push(e),this.history.length>2&&this.history.shift()},get add(){},get current(){return this.history[this.history.length-1]},get former(){return 2===this.history.length?this.history[0]:null}}}},{}],10:[function(e,t){t.exports={now:function(){var e,t=new Date,a=t.getHours(),n=t.getMinutes();12>a?e="am":(e="pm",a-=12),10>n&&(n="0"+n);var i="today "+a+":"+n+" "+e;return i},html:function(){return(new Date).toISOString()}}},{}],11:[function(e,t){t.exports=function(e){var t='[data-mongo-id="'+e+'"]',a=document.querySelector(t);null!==a&&a.parentNode.removeChild(a)}},{}],12:[function(e,t){t.exports=function(e,t){var a=function(e){e.preventDefault()};t?(e.addEventListener("mousewheel",a,!1),e.addEventListener("touchmove",a,!1)):(e.removeEventListener("mousewheel",a,!1),e.removeEventListener("touchmove",a,!1))}},{}],13:[function(e,t){t.exports=function(){Sigma.observers.forEach(function(e){e.disconnect()});for(var e=document.querySelectorAll("[data-sigma]"),t=0;t<e.length;++t)e[t].removeEventListener("focus",Sigma.contentEditing.editMode,!0),e[t].removeEventListener("blur",Sigma.contentEditing.viewMode,!0)}},{}],14:[function(e,t){t.exports=function(){var e=function(e,t){var a,n=document.createElement("canvas"),i=n.getContext("2d");if(t){var o,r,s,d,c=120,m=document.createElement("canvas"),u=m.getContext("2d");e.width>e.height?(o=(e.width-e.height)/2,r=0,s=e.height,d=s):e.height>e.width?(o=0,r=(e.height-e.width)/2,s=e.width,d=s):(o=r=0,s=d=e.width),n.width=n.height=c,m.width=m.height=c,u.drawImage(e,o,r,s,d,0,0,c,c),i.clearRect(0,0,c,c),i.beginPath(),i.arc(c/2,c/2,c/2-2,0,2*Math.PI,!0),i.fillStyle=i.createPattern(m,"no-repeat"),i.fill();var l=i.createLinearGradient(0,0,0,150);l.addColorStop(0,"rgba(229, 86, 109, .7)"),l.addColorStop(.25,"rgba(225, 98, 158, .7)"),l.addColorStop(.5,"rgba(195, 104, 213, .7)"),l.addColorStop(.75,"rgba(146, 94, 202, .7)"),l.addColorStop(1,"rgba(108, 83, 181, .7)"),i.lineWidth=2,i.strokeStyle=l,i.stroke(),a=n.toDataURL("image/png")}else{var g=600,h=1e3;e.width>h&&(e.height*=h/e.width,e.width=h),e.height>g&&(e.width*=g/e.height,e.height=g),n.width=e.width,n.height=e.height,i.clearRect(0,0,n.width,n.height),i.drawImage(e,0,0,e.width,e.height),a=n.toDataURL("image/jpeg",.7)}return a},t=function(t,a){if(t.type.match(/image.*/)){var n=document.createElement("img"),i=new FileReader;a.target.parentNode.querySelector('[data-sigma="content"]').appendChild(n),i.readAsArrayBuffer(t),i.onload=function(t){window.URL=window.URL||window.webkitURL;var a=new Blob([new Uint8Array(t.target.result)]),i=window.URL.createObjectURL(a),o=new Image;o.src=i,o.onload=function(){var t=Sigma.getTempId(),a=document.querySelector("[data-app-width]").dataset.appWidth,i=e(o,!0),r=e(o,!1);n.dataset.image="dropped",n.dataset.idType="tmp",n.dataset.mongoId=t,n.dataset.imageWidth="small"===a?"small":"large",Sigma.storeImage(t,i,r)}}}},a=function(){var e=event.dataTransfer.getData("text/plain");event.target.textContent+=" "+e};window.addEventListener("dragenter",function(e){e.preventDefault();var t=e.target.hasAttribute("data-sigma")?!0:!1;t&&e.target.focus()},!1),window.addEventListener("dragleave",function(e){e.preventDefault();var t=e.target.hasAttribute("data-sigma")?!0:!1;t&&e.target.blur()},!1),window.addEventListener("dragover",function(e){e.preventDefault()},!1),window.addEventListener("drop",function(e){e.preventDefault();var n=e.dataTransfer.files,i=e.target.hasAttribute("data-sigma")?!0:!1;if(i)if(0!==n.length)for(var o=0;o<n.length;++o)t(n[o],e);else a();e.target.focus()},!1)}},{}],15:[function(e,t){t.exports={removedImageIds:[],lookAtMutations:function(e){var t=e.addedNodes,a=e.removedNodes,n=e.type,i=this,o=function(e,t){var a=function(){e?i.removedImageIds.splice(i.removedImageIds.indexOf(t[r].dataset.mongoId),1):i.removedImageIds.push(t[r].dataset.mongoId)},o=function(e){if("#text"!==t[e].nodeName)t[e].hasAttribute("data-image")&&a();else if(t[e].hasChildNodes())for(var n=t[e].querySelectorAll("[data-image]"),i=0;i<n.length;++i)a()};if(t.length>0&&"childList"===n)for(var r=0;r<t.length;++r)o(r)};o(!1,a),o(!0,t)},"delete":function(){this.removedImageIds.length>0&&(Sigma.socket.emit("deleteImage",{ids:this.removedImageIds}),this.updateImageArray())},updateImageArray:function(){var e=this;Sigma.socket.on("updateImageArray",function(t){e.removedImageIds=t.array})}}},{}],16:[function(e,t){t.exports=function(){Sigma.socket.on("id",function(e){Sigma.getChannelId=e.id,Sigma.listen()})}},{}],17:[function(e,t){t.exports=function(){Sigma.socket.on("history",function(e){if(e.empty){var t="Welcome here pioneer!",a="It seems that you are the very first person on that channel.";a+=void 0!==Sigma.username?" Please edit that content to make it yours!":" Please identify yourself!",Sigma.addContent(!1,void 0,t,a,Sigma.username||"Sigma")}else e.documents.forEach(function(e){Sigma.addContent(e.html,e._id)});Sigma.setObservers(),Sigma.asyncUserAndHistoryState.check()})}},{}],18:[function(e,t){t.exports=function(){Sigma.socket.on("mongoId",function(e){Sigma.changeId(e.tempId,e.id,e.type)})}},{}],19:[function(e,t){t.exports=function(){Sigma.socket.on("socketMessage",function(e){Sigma.manageMessage(!0,e.message,e.type)})}},{}],20:[function(e,t){t.exports=function(){for(var e=window.crypto.getRandomValues(new Uint32Array(8)),t="",a=0;a<e.length;++a)t+=e[a].toString(16),a<e.length-1&&(t+="-");return t}},{}],21:[function(e,t){t.exports={add:function(){if(void 0===this.isVisible||!this.isVisible){var e=document.querySelector("body"),t=document.querySelector("main"),a=document.createElement("header"),n=document.createElement("h1");e.insertBefore(a,t),a.setAttribute("class","hero"),a.appendChild(n),n.appendChild(document.createTextNode("Create and share data in true real-time.")),this.isVisible=!0}},remove:function(){if(void 0===this.isVisible||!this.isVisible){var e=document.querySelector("header");e.parentNode.removeChild(e),this.isVisible=!1}}}},{}],22:[function(e,t){t.exports=function(){for(var e='[data-owner="'+Sigma.username+'"]',t=document.querySelectorAll(e),a=function(e){t[e].parentNode.classList.add("isYours")},n=0;n<t.length;++n)a(n)}},{}],23:[function(e,t){t.exports=function(){return"onLine"in navigator?navigator.onLine:void 0}},{}],24:[function(e,t){t.exports=function(){Sigma.socket.on("broadcast",function(e){switch(Sigma.disconnectObservers(),e.action){case"create":Sigma.addContent(e.html,e.id);break;case"update":Sigma.updateContent(e.html,e.id);break;case"delete":Sigma.deleteContent(e.id)}Sigma.setObservers(),Sigma.loadResponsiveImages()})}},{}],25:[function(e,t){t.exports=function(){for(var e=document.querySelector("[data-app-width]"),t=document.querySelectorAll("[data-image]"),a=function(a){t[a].dataset.imageWidth=e.dataset.appWidth;var n=Sigma.host+":"+Sigma.port+"/data/"+t[a].dataset.mongoId+"/"+e.dataset.appWidth;t[a].setAttribute("src",n)},n=0;n<t.length;++n)a(n)}},{}],26:[function(e,t){t.exports=function(){for(var e=document.querySelectorAll("[data-sigma]"),t=function(t){var a=e[t].parentNode.querySelector("[data-owner]").dataset.owner;a===Sigma.username&&(e[t].contentEditable="true")},a=0;a<e.length;++a)t(a)}},{}],27:[function(e,t){t.exports=function(e,t,a){var n=document.querySelector("[data-message]"),i=a?"confirmation":"alert",o=function(){n&&n.parentNode.removeChild(n)},r=function(){if(n)n.dataset.message=i,n.innerHTML=t;else{var e=document.createElement("span"),a=function(e){var t=e.target,a=function(){t.parentNode.removeChild(t)};t.classList.add("removeMessage"),Sigma.animationListener(!0,t,a,!0)};e.dataset.message=i,e.innerHTML=t,Sigma.navigation.visibility||e.classList.add("withNoNavigation");var o=document.querySelector("body");o.appendChild(e),Sigma.clickAndTouchListener.add(e,"eraseMessage",a)}};e?r():o()}},{}],28:[function(e,t){t.exports={visibility:!0,hide:function(){var e=document.querySelector("nav"),t=document.querySelector("[data-message]");e.classList.add("removeNavigation"),this.visibility=!1,t&&t.classList.add("withNoNavigation")},show:function(){var e=document.querySelector("nav"),t=document.querySelector("[data-message]");e.classList.remove("removeNavigation"),this.visibility=!0,t&&t.classList.remove("withNoNavigation")}}},{}],29:[function(e,t){t.exports=function(){var e,t=document.querySelector("[data-app-width]"),a=function(a){e[a].dataset.imageWidth=t.dataset.appWidth;var n=Sigma.host+":"+Sigma.port+"/data/"+e[a].dataset.mongoId+"/"+t.dataset.appWidth;e[a].setAttribute("src",n)},n=function(){var n=window.getComputedStyle(t,"::after").getPropertyValue("content"),i=n.replace(/\"/g,"");t.dataset.appWidth=Sigma.deviceWidth=i,e=document.querySelectorAll("[data-image-width]");for(var o=0;o<e.length;++o)a(o)};Sigma.animationListener(!1,t,n,!1)}},{}],30:[function(e,t){t.exports=function(){window.addEventListener("paste",function(e){Sigma.manageMessage(!0,"Pasting is currently not supported due to cross-browser limitations. Use drag and drop instead.",!1),e.preventDefault()},!1)}},{}],31:[function(e,t){t.exports={pool:[],init:function(){Sigma.socket.on("saveState",function(e){void 0!==e.tempId?Sigma.saveManager.toggleState(e.tempId,e.state):void 0!==e.id&&Sigma.saveManager.toggleState(e.id,e.state)})},add:function(e,t){var a=this.find(e);null===a?this.pool.push([e,t]):this.pool[a][1]=t},find:function(e){var t=function(e){return e[0]},a=this.pool.map(t).indexOf(e);return-1!==a?a:null},showSaveState:function(){console.log("S A V E D !!!")},toggleId:function(e,t){var a=this.find(e);null!==a&&(this.pool[a][0]=t)},toggleState:function(e,t){var a=this.find(e);null!==a&&(this.pool[a][1]=t,this.showSaveState())}}},{}],32:[function(e,t){t.exports=function(){for(var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=[],a=document.querySelectorAll("[data-sigma]"),n=function(n){t[n]=new e(function(e){e.forEach(function(e){"IMG"!==e.target.nodeName&&(Sigma.synchronize(),Sigma.loadResponsiveImages()),Sigma.droppedImages.lookAtMutations(e)})}),t[n].observe(a[n],{attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,subtree:!0,characterDataOldValue:!0})},i=0;i<a.length;++i)n(i);Sigma.observers=t}},{}],33:[function(e,t){t.exports={addForm:function(){var e=this,t=document.querySelector("body"),a=document.createElement("aside"),n=document.createElement("form"),i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("label"),s=document.createElement("label"),d=document.createElement("input"),c=document.createElement("input"),m=document.createElement("span"),u=document.createElement("span"),l=document.createElement("button"),g=function(){var n=function(){a.parentNode.removeChild(a)};Sigma.animationListener(!0,a,n,!0),a.classList.add("removeAside"),t.classList.remove("noScroll"),Sigma.navigation.show(),Sigma.disableMouseWheelAndTouchMove(t,!1),e.isVisible=!1,Sigma.manageMessage(!1)};n.setAttribute("class","signIn"),n.setAttribute("data-validation","Username and password must be 6 characters long with no white space! Password must contain at least 1 digit!"),i.setAttribute("class","usernameUberInput"),o.setAttribute("class","passwordUberInput"),d.setAttribute("class","username"),d.setAttribute("type","text"),d.setAttribute("placeholder","Username"),d.setAttribute("autofocus",""),c.setAttribute("class","password"),c.setAttribute("type","password"),c.setAttribute("placeholder","Password"),m.setAttribute("id","usernameInputState"),u.setAttribute("id","passwordInputState"),l.setAttribute("type","button"),l.setAttribute("class","cancel"),l.appendChild(document.createTextNode("cancel")),t.classList.toggle("noScroll"),t.insertBefore(a,t.firstChild),a.appendChild(n),n.appendChild(i),n.appendChild(o),i.appendChild(r),i.appendChild(d),i.appendChild(m),o.appendChild(s),o.appendChild(c),o.appendChild(u),n.appendChild(l),Sigma.signIn.form=n,Sigma.disableMouseWheelAndTouchMove(t,!0),Sigma.clickAndTouchListener.add(l,"returnHome",g)},checkForm:function(){var e=(document.querySelector("form"),document.querySelector(".username").value),t=document.querySelector(".password").value,a=document.querySelector("#usernameInputState"),n=document.querySelector("#passwordInputState"),i=new RegExp("^\\S{6,}$"),o=i.test(e),r=new RegExp("^(?=.*\\d)\\S{6,}$"),s=r.test(t),d=o&&s,c="",m=function(e){var t=document.querySelector("button[type=submit]");if(e){if(!t){var a=document.createElement("button");a.setAttribute("type","submit"),a.appendChild(document.createTextNode("sign in | up")),Sigma.signIn.form.appendChild(a)}}else t&&t.parentNode.removeChild(t)};d?(Sigma.signIn.username=e,Sigma.signIn.password=t,a.className=n.className="isOk",Sigma.manageMessage(!1),m(!0)):(o?""!==e&&(a.className="isOk"):""!==e?(c+="Username must be at least 6 characters long!",a.className="isErroneous"):a.className="",s?""!==t&&(n.className="isOk"):""!==t?(""!==c&&(c+=" "),c+="Password must be at least 6 characters long with one digit!",n.className="isErroneous"):n.className="",""!==c?Sigma.manageMessage(!0,c,!1):Sigma.manageMessage(!1),m(!1))},submit:function(e){e.preventDefault(),Sigma.socket.emit("signIn",{username:Sigma.signIn.username,password:Sigma.signIn.password})},init:function(){this.isVisible=!0,this.addForm(),this.form.addEventListener("input",this.checkForm,!1),this.form.addEventListener("submit",this.submit,!1)}}},{}],34:[function(e,t){t.exports={submit:function(e){e.preventDefault(),Sigma.socket.emit("signUp",{username:Sigma.signIn.username,password:Sigma.signIn.password})},init:function(){Sigma.socket.on("signUp",function(e){Sigma.manageMessage(!0,"Unknown username! Want to sign up as "+e.username+"?",!0);var t=document.querySelector("button[type=submit]");t.innerText="sign up",t.classList.add("signUp"),Sigma.signIn.form.removeEventListener("submit",Sigma.signIn.submit,!1),Sigma.signIn.form.addEventListener("submit",Sigma.signUp.submit,!1)})}}},{}],35:[function(e,t){t.exports={i:0,get value(){return++this.i,this.i}}},{}],36:[function(e,t){t.exports=function(e,t,a){Sigma.socket.emit("storeImage",{tempId:e,smallImage:t,largeImage:a})}},{}],37:[function(e,t){t.exports=function(){var e,t,a,n,i=document.activeElement.parentNode,o=i.cloneNode(!0),r=document.createDocumentFragment(),s="HTML"!==i.nodeName,d=function(e){n[e].removeAttribute("src"),n[e].removeAttribute("data-image-width")},c=function(e){editableElements[e].contentEditable="false"};r.appendChild(o),t=r.querySelector(".tools"),null!==t&&t.parentNode.removeChild(t),n=r.querySelectorAll("[data-image-width]");for(var m=0;m<n.length;++m)d(m);editableElements=r.querySelectorAll("[data-sigma]");for(var u=0;u<editableElements.length;++u)c(u);a=r.querySelector('[data-structure="article"]').innerHTML,document.hasFocus()&&s&&(i.hasAttribute("data-mongo-id")?"const"===i.dataset.idType?(e=i.dataset.mongoId,Sigma.socket.emit(Sigma.getChannelId,{action:"update",mongoId:e,html:a,owner:Sigma.username})):console.log("berp"):(i.dataset.idType="tmp",e=Sigma.getTempId(),i.dataset.mongoId=e,Sigma.socket.emit(Sigma.getChannelId,{action:"create",mongoId:e,html:a,owner:Sigma.username})),Sigma.saveManager.add(e,!1))}},{}],38:[function(e,t){t.exports={changeUserInterfaceToSign:function(){Sigma.connectOrCreateButton(!0),Sigma.heroHeader.add(),Sigma.userIsConnected()},checkStorageState:function(){Sigma.tryLocalStorage.clearStorage(),Sigma.manageMessage(!0,"Unwanted LocalStorage change occured. LocalStorage has been cleared.",!1),Sigma.tryLocalStorage.changeUserInterfaceToSign()},clearStorage:function(){localStorage.clear()},init:function(){if("localStorage"in window){var e=this,t=void 0===localStorage.sigma?{username:void 0,password:void 0}:JSON.parse(localStorage.sigma);window.addEventListener("storage",e.checkStorageState,!1),Sigma.socket.on("localStorageState",function(a){a.secure?(Sigma.username=t.username,Sigma.asyncUserAndHistoryState.check()):(e.clearStorage(),Sigma.manageMessage(!0,"Wrong credentials were stored in local browser. Please sign in or sign up!",!1),e.changeUserInterfaceToSign())}),void 0!==t.username&&void 0!==t.password?Sigma.socket.emit("checkLocalStorage",{username:t.username,password:t.password}):(e.clearStorage(),e.changeUserInterfaceToSign())}else Sigma.manageMessage(!0,"LocalStorage is not supported!",!1)}}},{}],39:[function(e,t){t.exports=function(e,t){var a='[data-mongo-id="'+t+'"]',n=document.querySelector(a);null!==n&&(n.innerHTML=e)}},{}],40:[function(e,t){t.exports=function(){Sigma.socket.on("isConnected",function(e){var t=document.querySelector("aside"),a=document.querySelector("body"),n=function(){var e=function(){t.parentNode.removeChild(t)};Sigma.animationListener(!0,t,e,!0),t.classList.add("removeAside"),a.classList.remove("noScroll"),Sigma.navigation.show(),Sigma.disableMouseWheelAndTouchMove(a,!0),Sigma.signIn.isVisible=!1,Sigma.manageMessage(!1)};n(),Sigma.username=e.username,"localStorage"in window?localStorage.sigma=JSON.stringify({username:Sigma.username,password:e.password}):Sigma.manageMessage(!0,"LocalStorage is not supported!",!1),Sigma.asyncUserAndHistoryState.check(),Sigma.heroHeader.remove()})}},{}]},{},[1]);
!function e(t,n,a){function o(r,s){if(!n[r]){if(!t[r]){var d="function"==typeof require&&require;if(!s&&d)return d(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+r+"'")}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return o(n?n:e)},c,c.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)o(a[r]);return o}({1:[function(e,t){(function(){"use strict";var t=window,n=t.Sigma={};n.host="http://192.168.0.1",n.port=1337,n.socket=io.connect(n.host),n.clickAndTouchListener=e("./modules/clickAndTouchListener.js"),n.connectOrCreateButton=e("./modules/connectOrCreateButton.js"),n.date=e("./modules/date.js"),n.addContent=e("./modules/addContent.js"),n.updateContent=e("./modules/updateContent.js"),n.deleteContent=e("./modules/deleteContent.js"),n.preventPasting=e("./modules/preventPasting.js"),n.dragAndDrop=e("./modules/dragAndDrop.js"),n.storeImage=e("./modules/storeImage.js"),n.makeReadonly=e("./modules/makeReadonly.js"),n.observeWidth=e("./modules/observeWidth.js"),n.setObservers=e("./modules/setObservers.js"),n.droppedImages=e("./modules/droppedImages.js"),n.simpleCounter=e("./modules/simpleCounter.js"),n.synchronize=e("./modules/synchronize.js"),n.contentEditing=e("./modules/contentEditing.js"),n.getChannelId=e("./modules/getChannelId.js"),n.getMongoId=e("./modules/getMongoId.js"),n.changeId=e("./modules/changeId.js"),n.getTempId=e("./modules/getTempId.js"),n.listen=e("./modules/listen.js"),n.disconnectObservers=e("./modules/disconnectObservers.js"),n.getHistory=e("./modules/getHistory.js"),n.tryLocalStorage=e("./modules/tryLocalStorage.js"),n.addHeroHeader=e("./modules/addHeroHeader.js"),n.hideOrShowNav=e("./modules/hideOrShowNav.js"),n.animationListener=e("./modules/animationListener.js"),n.signIn=e("./modules/signIn.js"),n.signUp=e("./modules/signUp.js"),n.userIsConnected=e("./modules/userIsConnected.js"),n.highlightUserArticles=e("./modules/highlightUserArticles.js"),n.manageMessage=e("./modules/manageMessage.js"),n.getSocketMessage=e("./modules/getSocketMessage.js"),n.saveManager=e("./modules/saveManager.js"),n.ready=function(){var e=function(){n.getChannelId(),n.getMongoId(),n.getHistory(),n.getSocketMessage(),n.saveManager.init(),n.tryLocalStorage(),n.preventPasting(),n.dragAndDrop()};document.addEventListener("DOMContentLoaded",e,!1)}()}).call(window),t.exports=function(e,t,n,a,o){var i=document.querySelector("main"),r=i.querySelector(".row:first-child"),s=null!==r?r.children.length:0,d=document.createElement("article");if(d.setAttribute("data-structure","article"),d.setAttribute("class","cell"),e)d.dataset.idType="const",d.dataset.mongoId=t,d.innerHTML=e;else{var c=document.createElement("h1");c.setAttribute("data-sigma","title"),c.setAttribute("contenteditable","true"),c.appendChild(document.createTextNode(n));var m=document.createElement("h2");m.setAttribute("data-owner",o),m.appendChild(document.createTextNode(o));var u=document.createElement("time");u.appendChild(document.createTextNode(Sigma.date.now())),u.setAttribute("datetime",Sigma.date.html());var l=document.createElement("article");l.setAttribute("data-sigma","content"),l.setAttribute("contenteditable","true"),l.appendChild(document.createTextNode(a)),d.appendChild(c),d.appendChild(m),d.appendChild(u),d.appendChild(l)}if(0===s||3===s){var g=document.createElement("div");g.setAttribute("class","row"),i.insertBefore(g,i.firstChild),g.appendChild(d)}else r.insertBefore(d,r.firstChild)},t.exports=function(){var e=document.querySelector("body"),t=document.querySelector("main"),n=document.createElement("header"),a=document.createElement("h1");e.insertBefore(n,t),n.setAttribute("class","hero"),n.appendChild(a),a.appendChild(document.createTextNode("Create and share data in true real-time."))},t.exports=function(e,t,n,a){var o=["animation","webkitAnimation","MSAnimation","oAnimation"],i=function(t){return t+("animation"===t?e?"end":"start":e?"End":"Start")},r=o.map(i),s=function(){var e=this;n(),a&&r.forEach(function(t){e.removeEventListener(t,s,!1)})};r.forEach(function(e){t.addEventListener(e,s,!1)})},t.exports=function(e,t,n){var a='[data-mongo-id="'+e+'"]',o=document.querySelector(a),i=o.innerHTML;switch(o.dataset.idType="const",o.dataset.mongoId=t,n){case"article":Sigma.socket.emit(Sigma.getChannelId,{action:"update",mongoId:t,html:i,owner:Sigma.username});break;case"image":o.src=Sigma.host+":"+Sigma.port+"/data/"+t}},t.exports={functions:{},preventClickIfTouch:function(e){"touchstart"===e.type&&e.preventDefault()},add:function(e,t,n,a){var o=this,i=n;a=a||!1,o.functions[t]=function(e){a||o.preventClickIfTouch(e),i(e)},e.addEventListener("click",o.functions[t],!1),e.addEventListener("touchstart",o.functions[t],!1)},remove:function(e,t){var n=this;e.removeEventListener("click",n.functions[t],!1),e.removeEventListener("touchstart",n.functions[t],!1)}},t.exports=function(e){var t=function(e){var t=document.querySelector("nav"),n=document.createElement("a"),a=document.createElement("span"),o=function(){if("connect"===e)Sigma.signIn.isVisible||(Sigma.signIn.init(),Sigma.signUp.init(),Sigma.hideOrShowNav());else{var t="An editable title!",n="Here goes the content of your lovely article. You can directly drag & drop images here!";Sigma.disconnectObservers(),Sigma.addContent(!1,void 0,t,n,Sigma.username),Sigma.setObservers()}};n.setAttribute("href","#"),n.setAttribute("class",e),t.lastChild.appendChild(n),n.appendChild(a),a.appendChild(document.createTextNode(e)),Sigma.clickAndTouchListener.add(n,"addFormOrCreate",o)},n=function(e){var t="."+e,n=document.querySelector(t);null!==n&&(Sigma.clickAndTouchListener.remove(n,"addFormOrCreate"),n.parentNode.removeChild(n))};e?(n("create"),t("connect")):(n("connect"),t("create"))},t.exports={eraseIt:function(){var e=Sigma.contentEditing.target.current,t=e.dataset.mongoId;e.parentNode.removeChild(e),Sigma.socket.emit(Sigma.getChannelId,{action:"delete",mongoId:t})},addTools:function(e){var t=Sigma.contentEditing,n=document.createElement("div"),a=document.createElement("a"),o=document.createElement("a"),i=t.setArticle(e.target);n.setAttribute("class","tools"),a.setAttribute("class","close"),a.setAttribute("href","#"),a.setAttribute("data-tooltip","close"),o.setAttribute("class","erase"),o.setAttribute("href","#"),o.setAttribute("data-tooltip","erase"),i.appendChild(n),n.appendChild(a),n.appendChild(o),Sigma.clickAndTouchListener.add(a,"removeTools",t.removeTools),Sigma.clickAndTouchListener.add(o,"eraseIt",t.eraseIt),t.formerTarget=e.target.parentNode},manageTools:function(e){var t=Sigma.contentEditing,n=document.querySelector(".tools");if(null===n)t.addTools(e);else{var a=t.setArticle(n);t.target.current!==a&&(n.parentNode.removeChild(n),t.addTools(e));var o=document.querySelector(".erase");Sigma.clickAndTouchListener.remove(o,"eraseIt"),Sigma.clickAndTouchListener.add(o,"eraseIt",t.eraseIt)}},removeTools:function(){var e=document.querySelector(".tools");e.parentNode.removeChild(e)},setArticle:function(e){var t;return t="article"!==e.parentNode.dataset.structure?e.parentNode.parentNode:e.parentNode},editMode:function(e){var t=e.target.parentNode;t.classList.toggle("editMode"),Sigma.contentEditing.target.add=t},viewMode:function(e){var t=e.target.parentNode;t.classList.remove("editMode"),t.querySelector("time").setAttribute("datetime",Sigma.date.html()),t.querySelector("time").innerText=Sigma.date.now(),Sigma.droppedImages.delete()},status:function(e){var t=this;e.addEventListener("focus",this.editMode,!0),e.addEventListener("blur",this.viewMode,!0),Sigma.clickAndTouchListener.add(e,"manageTools",t.manageTools,!0)},target:{history:[],set add(e){this.history.push(e),this.history.length>2&&this.history.shift()},get add(){},get current(){return this.history[this.history.length-1]},get former(){return 2===this.history.length?this.history[0]:null}}},t.exports={now:function(){var e,t=new Date,n=t.getHours(),a=t.getMinutes();12>n?e="am":(e="pm",n-=12),10>a&&(a="0"+a);var o="today "+n+":"+a+" "+e;return o},html:function(){return(new Date).toISOString()}},t.exports=function(e){var t='[data-mongo-id="'+e+'"]',n=document.querySelector(t);null!==n&&n.parentNode.removeChild(n)},t.exports=function(){Sigma.observers.forEach(function(e){e.disconnect()});for(var e=document.querySelectorAll("[data-sigma]"),t=0;t<e.length;++t)e[t].removeEventListener("focus",Sigma.contentEditing.editMode,!0),e[t].removeEventListener("blur",Sigma.contentEditing.viewMode,!0)},t.exports=function(){var e=function(e,t){var n,a=document.createElement("canvas"),o=a.getContext("2d");if(t){var i,r,s,d,c=120,m=document.createElement("canvas"),u=m.getContext("2d");e.width>e.height?(i=(e.width-e.height)/2,r=0,s=e.height,d=s):e.height>e.width?(i=0,r=(e.height-e.width)/2,s=e.width,d=s):(i=r=0,s=d=e.width),a.width=a.height=c,m.width=m.height=c,u.drawImage(e,i,r,s,d,0,0,c,c),o.clearRect(0,0,c,c),o.beginPath(),o.arc(c/2,c/2,c/2-2,0,2*Math.PI,!0),o.fillStyle=o.createPattern(m,"no-repeat"),o.fill();var l=o.createLinearGradient(0,0,0,150);l.addColorStop(0,"rgba(229, 86, 109, .7)"),l.addColorStop(.25,"rgba(225, 98, 158, .7)"),l.addColorStop(.5,"rgba(195, 104, 213, .7)"),l.addColorStop(.75,"rgba(146, 94, 202, .7)"),l.addColorStop(1,"rgba(108, 83, 181, .7)"),o.lineWidth=2,o.strokeStyle=l,o.stroke(),n=a.toDataURL("image/png")}else{var g=400,h=800;e.width>h&&(e.height*=h/e.width,e.width=h),e.height>g&&(e.width*=g/e.height,e.height=g),a.width=e.width,a.height=e.height,o.clearRect(0,0,a.width,a.height),o.drawImage(e,0,0,e.width,e.height),n=a.toDataURL("image/jpeg",.7)}return n},t=function(t,n){if(t.type.match(/image.*/)){var a=document.createElement("img"),o=new FileReader;n.target.parentNode.querySelector('[data-sigma="content"]').appendChild(a),o.readAsArrayBuffer(t),o.onload=function(t){window.URL=window.URL||window.webkitURL;var n=new Blob([new Uint8Array(t.target.result)]),o=window.URL.createObjectURL(n),i=new Image;i.src=o,i.onload=function(){var t=Sigma.getTempId(),n=document.querySelector("[data-app-width]").dataset.appWidth,o=e(i,!0),r=e(i,!1);a.dataset.image="dropped",a.dataset.idType="tmp",a.dataset.mongoId=t,a.dataset.imageWidth="small"===n?"small":"large",Sigma.storeImage(t,o,r)}}}},n=function(){var e=event.dataTransfer.getData("text/plain");event.target.textContent+=" "+e};window.addEventListener("dragenter",function(e){e.preventDefault();var t=e.target.hasAttribute("data-sigma")?!0:!1;t&&e.target.focus()},!1),window.addEventListener("dragleave",function(e){e.preventDefault();var t=e.target.hasAttribute("data-sigma")?!0:!1;t&&e.target.blur()},!1),window.addEventListener("dragover",function(e){e.preventDefault()},!1),window.addEventListener("drop",function(e){e.preventDefault();var a=e.dataTransfer.files,o=e.target.hasAttribute("data-sigma")?!0:!1;if(o)if(0!==a.length)for(var i=0;i<a.length;++i)t(a[i],e);else n();e.target.focus()},!1)},t.exports={removedImageIds:[],lookAtMutations:function(e){var t=e.addedNodes,n=e.removedNodes,a=e.type,o=this,i=function(e,t){var n=function(){e?o.removedImageIds.splice(o.removedImageIds.indexOf(t[r].dataset.mongoId),1):o.removedImageIds.push(t[r].dataset.mongoId)},i=function(e){if("#text"!==t[e].nodeName)t[e].hasAttribute("data-image")&&n();else if(t[e].hasChildNodes())for(var a=t[e].querySelectorAll("[data-image]"),o=0;o<a.length;++o)n()};if(t.length>0&&"childList"===a)for(var r=0;r<t.length;++r)i(r)};i(!1,n),i(!0,t)},"delete":function(){this.removedImageIds.length>0&&(Sigma.socket.emit("deleteImage",{ids:this.removedImageIds}),this.updateImageArray())},updateImageArray:function(){var e=this;Sigma.socket.on("updateImageArray",function(t){e.removedImageIds=t.array})}},t.exports=function(){Sigma.socket.on("id",function(e){Sigma.getChannelId=e.id,Sigma.listen()})},t.exports=function(){Sigma.socket.on("history",function(e){if(e.empty){var t="Welcome here pioneer!",n="It seems that you are the very first person on that channel.";n+=void 0!==Sigma.username?" Please edit that content to make it yours!":" Please identify yourself!",Sigma.addContent(!1,void 0,t,n,Sigma.username||"Sigma")}else e.documents.forEach(function(e){Sigma.addContent(e.html,e._id)});Sigma.makeReadonly(),Sigma.highlightUserArticles(),Sigma.setObservers(),Sigma.observeWidth()})},t.exports=function(){Sigma.socket.on("mongoId",function(e){Sigma.changeId(e.tempId,e.id,e.type)})},t.exports=function(){Sigma.socket.on("socketMessage",function(e){Sigma.manageMessage(!0,e.message,e.type)})},t.exports=function(){for(var e=window.crypto.getRandomValues(new Uint32Array(8)),t="",n=0;n<e.length;++n)t+=e[n].toString(16),n<e.length-1&&(t+="-");return t},t.exports=function(){var e=document.querySelector("nav");e.classList.toggle("removeNav")},t.exports=function(){for(var e='[data-owner="'+Sigma.username+'"]',t=document.querySelectorAll(e),n=function(e){t[e].parentNode.classList.add("isYours")},a=0;a<t.length;++a)n(a)},t.exports=function(){Sigma.socket.on("broadcast",function(e){switch(Sigma.disconnectObservers(),e.action){case"create":Sigma.addContent(e.html,e.id);break;case"update":Sigma.updateContent(e.html,e.id);break;case"delete":Sigma.deleteContent(e.id)}Sigma.makeReadonly(),Sigma.setObservers()})},t.exports=function(){for(var e=document.querySelectorAll("[data-sigma]"),t=function(t){var n=e[t].parentNode.querySelector("[data-owner]").dataset.owner;n!==Sigma.username&&(e[t].contentEditable="false")},n=0;n<e.length;++n)t(n)},t.exports=function(e,t,n){var a=document.querySelector("span[class$=Message]"),o=n?"confirmationMessage":"alertMessage",i=function(){a&&a.parentNode.removeChild(a)},r=function(){if(a)a.setAttribute("class",o),a.innerHTML=t;else{var e=document.createElement("span");e.setAttribute("class",o),e.innerHTML=t;var n=document.querySelector("body");n.appendChild(e),e.addEventListener("click",function(){var e=this,t=function(){e.parentNode.removeChild(e)};this.classList.add("removeMessage"),Sigma.animationListener(!0,e,t,!0)},!1)}};e?r():i()},t.exports=function(){var e,t=document.querySelector("[data-app-width]"),n=function(n){e[n].dataset.imageWidth=t.dataset.appWidth;var a=Sigma.host+":"+Sigma.port+"/data/"+e[n].dataset.mongoId+"/"+t.dataset.appWidth;e[n].setAttribute("src",a)},a=function(){var a=window.getComputedStyle(t,"::after").getPropertyValue("content");t.dataset.appWidth=a.replace(/\"/g,""),e=document.querySelectorAll("[data-image-width]");for(var o=0;o<e.length;++o)n(o)};Sigma.animationListener(!1,t,a,!1),a()},t.exports=function(){window.addEventListener("paste",function(e){Sigma.manageMessage(!0,"Pasting is currently not supported due to cross-browser limitations. Use drag and drop instead.",!1),e.preventDefault()},!1)},t.exports={pool:[],init:function(){Sigma.socket.on("saveState",function(e){void 0!==e.tempId?Sigma.saveManager.toggleState(e.tempId,e.state):void 0!==e.id&&Sigma.saveManager.toggleState(e.id,e.state)})},add:function(e,t){var n=this.find(e);null===n?this.pool.push([e,t]):this.pool[n][1]=t},find:function(e){var t=function(e){return e[0]},n=this.pool.map(t).indexOf(e);return-1!==n?n:null},showSaveState:function(){console.log("S A V E D !!!")},toggleId:function(e,t){var n=this.find(e);null!==n&&(this.pool[n][0]=t)},toggleState:function(e,t){var n=this.find(e);null!==n&&(this.pool[n][1]=t,this.showSaveState())}},t.exports=function(){for(var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=[],n=document.querySelectorAll("[data-sigma]"),a=function(a){t[a]=new e(function(e){e.forEach(function(e){"IMG"!==e.target.nodeName&&Sigma.synchronize(),Sigma.droppedImages.lookAtMutations(e)})}),t[a].observe(n[a],{attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,subtree:!0,characterDataOldValue:!0})},o=function(e){var t=n[e].parentNode.querySelector("[data-owner]").dataset.owner;Sigma.username===t&&Sigma.contentEditing.status(n[e])},i=0;i<n.length;++i)a(i),o(i);Sigma.observers=t},t.exports={addForm:function(){var e=this,t=document.querySelector("body"),n=document.createElement("aside"),a=document.createElement("form"),o=document.createElement("div"),i=document.createElement("div"),r=document.createElement("label"),s=document.createElement("label"),d=document.createElement("input"),c=document.createElement("input"),m=document.createElement("span"),u=document.createElement("span"),l=document.createElement("button"),g=function(e){e.preventDefault()},h=function(){var a=function(){n.parentNode.removeChild(n)};Sigma.animationListener(!0,n,a,!0),n.classList.add("removeAside"),t.classList.remove("noScroll"),Sigma.hideOrShowNav(),t.removeEventListener("mousewheel",g,!1),t.removeEventListener("touchmove",g,!1),e.isVisible=!1};a.setAttribute("class","signIn"),a.setAttribute("data-validation","Username and password must be 6 characters long with no white space! Password must contain at least 1 digit!"),o.setAttribute("class","usernameUberInput"),i.setAttribute("class","passwordUberInput"),d.setAttribute("class","username"),d.setAttribute("type","text"),d.setAttribute("placeholder","Username"),d.setAttribute("autofocus",""),c.setAttribute("class","password"),c.setAttribute("type","password"),c.setAttribute("placeholder","Password"),m.setAttribute("id","usernameInputState"),u.setAttribute("id","passwordInputState"),l.setAttribute("type","button"),l.setAttribute("class","cancel"),l.appendChild(document.createTextNode("cancel")),t.classList.toggle("noScroll"),t.insertBefore(n,t.firstChild),n.appendChild(a),a.appendChild(o),a.appendChild(i),o.appendChild(r),o.appendChild(d),o.appendChild(m),i.appendChild(s),i.appendChild(c),i.appendChild(u),a.appendChild(l),Sigma.signIn.form=a,t.addEventListener("mousewheel",g,!1),t.addEventListener("touchmove",g,!1),l.addEventListener("click",h,!1)},checkForm:function(){var e=(document.querySelector("form"),document.querySelector(".username").value),t=document.querySelector(".password").value,n=document.querySelector("#usernameInputState"),a=document.querySelector("#passwordInputState"),o=new RegExp("^\\S{6,}$"),i=o.test(e),r=new RegExp("^(?=.*\\d)\\S{6,}$"),s=r.test(t),d=i&&s,c="",m=function(e){var t=document.querySelector("button[type=submit]");if(e){if(!t){var n=document.createElement("button");n.setAttribute("type","submit"),n.appendChild(document.createTextNode("sign in | up")),Sigma.signIn.form.appendChild(n)}}else t&&t.parentNode.removeChild(t)};d?(Sigma.signIn.username=e,Sigma.signIn.password=t,n.className=a.className="isOk",Sigma.manageMessage(!1),m(!0)):(i?""!==e&&(n.className="isOk"):""!==e?(c+="Username must be at least 6 characters long!",n.className="isErroneous"):n.className="",s?""!==t&&(a.className="isOk"):""!==t?(""!==c&&(c+=" "),c+="Password must be at least 6 characters long with one digit!",a.className="isErroneous"):a.className="",""!==c?Sigma.manageMessage(!0,c,!1):Sigma.manageMessage(!1),m(!1))},submit:function(e){e.preventDefault(),Sigma.socket.emit("signIn",{username:Sigma.signIn.username,password:Sigma.signIn.password})},init:function(){this.isVisible=!0,this.addForm(),this.form.addEventListener("input",this.checkForm,!1),this.form.addEventListener("submit",this.submit,!1)}},t.exports={submit:function(e){e.preventDefault(),Sigma.socket.emit("signUp",{username:Sigma.signIn.username,password:Sigma.signIn.password})},init:function(){Sigma.socket.on("signUp",function(e){Sigma.manageMessage(!0,"Unknown username! Want to sign up as "+e.username+"?",!0);var t=document.querySelector("button[type=submit]");t.innerText="sign up",t.classList.add("signUp"),Sigma.signIn.form.removeEventListener("submit",Sigma.signIn.submit,!1),Sigma.signIn.form.addEventListener("submit",Sigma.signUp.submit,!1)})}},t.exports={i:0,get value(){return++this.i,this.i}},t.exports=function(e,t,n){Sigma.socket.emit("storeImage",{tempId:e,smallImage:t,largeImage:n})},t.exports=function(){var e,t,n,a,o=document.activeElement.parentNode,i=o.cloneNode(!0),r=document.createDocumentFragment(),s="HTML"!==o.nodeName,d=function(e){a[e].removeAttribute("src"),a[e].removeAttribute("[data-image-width]")};r.appendChild(i),t=r.querySelector(".tools"),null!==t&&t.parentNode.removeChild(t),n=r.querySelector('[data-structure="article"]').innerHTML,a=r.querySelectorAll("[data-image-width]");for(var c=0;c<a.length;++c)d(c);document.hasFocus()&&s&&(o.hasAttribute("data-mongo-id")?"const"===o.dataset.idType?(e=o.dataset.mongoId,Sigma.socket.emit(Sigma.getChannelId,{action:"update",mongoId:e,html:n,owner:Sigma.username})):console.log("berp"):(o.dataset.idType="tmp",e=Sigma.getTempId(),o.dataset.mongoId=e,Sigma.socket.emit(Sigma.getChannelId,{action:"create",mongoId:e,html:n,owner:Sigma.username})),Sigma.saveManager.add(e,!1))},t.exports=function(){if("localStorage"in window){var e=localStorage.getItem("username"),t=function(){console.log(event)};null!==e?(Sigma.username=e,Sigma.connectOrCreateButton(!1),Sigma.manageMessage(!0,"Hi "+Sigma.username+"! Nice to see you there!",!0)):(Sigma.connectOrCreateButton(!0),Sigma.addHeroHeader(),Sigma.userIsConnected()),window.addEventListener("storage",t,!1)}},t.exports=function(e,t){var n='[data-mongo-id="'+t+'"]',a=document.querySelector(n);null!==a&&(a.innerHTML=e)},t.exports=function(){Sigma.socket.on("isConnected",function(e){var t=document.querySelector("aside");t.parentNode.removeChild(t),Sigma.username=e.username,"localStorage"in window&&localStorage.setItem("username",Sigma.username),Sigma.connectOrCreateButton(!1),Sigma.highlightUserArticles(),Sigma.manageMessage(!0,"Hi "+Sigma.username+"! Nice to see you there!",!0)})}},{"./modules/addContent.js":2,"./modules/addHeroHeader.js":3,"./modules/animationListener.js":4,"./modules/changeId.js":5,"./modules/clickAndTouchListener.js":6,"./modules/connectOrCreateButton.js":7,"./modules/contentEditing.js":8,"./modules/date.js":9,"./modules/deleteContent.js":10,"./modules/disconnectObservers.js":11,"./modules/dragAndDrop.js":12,"./modules/droppedImages.js":13,"./modules/getChannelId.js":14,"./modules/getHistory.js":15,"./modules/getMongoId.js":16,"./modules/getSocketMessage.js":17,"./modules/getTempId.js":18,"./modules/hideOrShowNav.js":19,"./modules/highlightUserArticles.js":20,"./modules/listen.js":21,"./modules/makeReadonly.js":22,"./modules/manageMessage.js":23,"./modules/observeWidth.js":24,"./modules/preventPasting.js":25,"./modules/saveManager.js":26,"./modules/setObservers.js":27,"./modules/signIn.js":28,"./modules/signUp.js":29,"./modules/simpleCounter.js":30,"./modules/storeImage.js":31,"./modules/synchronize.js":32,"./modules/tryLocalStorage.js":33,"./modules/updateContent.js":34,"./modules/userIsConnected.js":35}],2:[function(e,t){t.exports=function(e,t,n,a,o){var i=document.querySelector("main"),r=i.querySelector(".row:first-child"),s=null!==r?r.children.length:0,d=document.createElement("article");if(d.setAttribute("data-structure","article"),d.setAttribute("class","cell"),e)d.dataset.idType="const",d.dataset.mongoId=t,d.innerHTML=e;else{var c=document.createElement("h1");c.setAttribute("data-sigma","title"),c.setAttribute("contenteditable","true"),c.appendChild(document.createTextNode(n));var m=document.createElement("h2");m.setAttribute("data-owner",o),m.appendChild(document.createTextNode(o));var u=document.createElement("time");u.appendChild(document.createTextNode(Sigma.date.now())),u.setAttribute("datetime",Sigma.date.html());var l=document.createElement("article");l.setAttribute("data-sigma","content"),l.setAttribute("contenteditable","true"),l.appendChild(document.createTextNode(a)),d.appendChild(c),d.appendChild(m),d.appendChild(u),d.appendChild(l)}if(0===s||3===s){var g=document.createElement("div");g.setAttribute("class","row"),i.insertBefore(g,i.firstChild),g.appendChild(d)}else r.insertBefore(d,r.firstChild)}},{}],3:[function(e,t){t.exports=function(){var e=document.querySelector("body"),t=document.querySelector("main"),n=document.createElement("header"),a=document.createElement("h1");e.insertBefore(n,t),n.setAttribute("class","hero"),n.appendChild(a),a.appendChild(document.createTextNode("Create and share data in true real-time."))}},{}],4:[function(e,t){t.exports=function(e,t,n,a){var o=["animation","webkitAnimation","MSAnimation","oAnimation"],i=function(t){return t+("animation"===t?e?"end":"start":e?"End":"Start")},r=o.map(i),s=function(){var e=this;n(),a&&r.forEach(function(t){e.removeEventListener(t,s,!1)})};r.forEach(function(e){t.addEventListener(e,s,!1)})}},{}],5:[function(e,t){t.exports=function(e,t,n){var a='[data-mongo-id="'+e+'"]',o=document.querySelector(a),i=o.innerHTML;switch(o.dataset.idType="const",o.dataset.mongoId=t,n){case"article":Sigma.socket.emit(Sigma.getChannelId,{action:"update",mongoId:t,html:i,owner:Sigma.username});break;case"image":o.src=Sigma.host+":"+Sigma.port+"/data/"+t}}},{}],6:[function(e,t){t.exports={functions:{},preventClickIfTouch:function(e){"touchstart"===e.type&&e.preventDefault()},add:function(e,t,n,a){var o=this,i=n;a=a||!1,o.functions[t]=function(e){a||o.preventClickIfTouch(e),i(e)},e.addEventListener("click",o.functions[t],!1),e.addEventListener("touchstart",o.functions[t],!1)},remove:function(e,t){var n=this;e.removeEventListener("click",n.functions[t],!1),e.removeEventListener("touchstart",n.functions[t],!1)}}},{}],7:[function(e,t){t.exports=function(e){var t=function(e){var t=document.querySelector("nav"),n=document.createElement("a"),a=document.createElement("span"),o=function(){if("connect"===e)Sigma.signIn.isVisible||(Sigma.signIn.init(),Sigma.signUp.init(),Sigma.hideOrShowNav());else{var t="An editable title!",n="Here goes the content of your lovely article. You can directly drag & drop images here!";Sigma.disconnectObservers(),Sigma.addContent(!1,void 0,t,n,Sigma.username),Sigma.setObservers()}};n.setAttribute("href","#"),n.setAttribute("class",e),t.lastChild.appendChild(n),n.appendChild(a),a.appendChild(document.createTextNode(e)),Sigma.clickAndTouchListener.add(n,"addFormOrCreate",o)},n=function(e){var t="."+e,n=document.querySelector(t);null!==n&&(Sigma.clickAndTouchListener.remove(n,"addFormOrCreate"),n.parentNode.removeChild(n))};e?(n("create"),t("connect")):(n("connect"),t("create"))}},{}],8:[function(e,t){t.exports={eraseIt:function(){var e=Sigma.contentEditing.target.current,t=e.dataset.mongoId;e.parentNode.removeChild(e),Sigma.socket.emit(Sigma.getChannelId,{action:"delete",mongoId:t})},addTools:function(e){var t=Sigma.contentEditing,n=document.createElement("div"),a=document.createElement("a"),o=document.createElement("a"),i=t.setArticle(e.target);n.setAttribute("class","tools"),a.setAttribute("class","close"),a.setAttribute("href","#"),a.setAttribute("data-tooltip","close"),o.setAttribute("class","erase"),o.setAttribute("href","#"),o.setAttribute("data-tooltip","erase"),i.appendChild(n),n.appendChild(a),n.appendChild(o),Sigma.clickAndTouchListener.add(a,"removeTools",t.removeTools),Sigma.clickAndTouchListener.add(o,"eraseIt",t.eraseIt),t.formerTarget=e.target.parentNode},manageTools:function(e){var t=Sigma.contentEditing,n=document.querySelector(".tools");if(null===n)t.addTools(e);else{var a=t.setArticle(n);t.target.current!==a&&(n.parentNode.removeChild(n),t.addTools(e));var o=document.querySelector(".erase");Sigma.clickAndTouchListener.remove(o,"eraseIt"),Sigma.clickAndTouchListener.add(o,"eraseIt",t.eraseIt)}},removeTools:function(){var e=document.querySelector(".tools");e.parentNode.removeChild(e)},setArticle:function(e){var t;return t="article"!==e.parentNode.dataset.structure?e.parentNode.parentNode:e.parentNode},editMode:function(e){var t=e.target.parentNode;t.classList.toggle("editMode"),Sigma.contentEditing.target.add=t},viewMode:function(e){var t=e.target.parentNode;t.classList.remove("editMode"),t.querySelector("time").setAttribute("datetime",Sigma.date.html()),t.querySelector("time").innerText=Sigma.date.now(),Sigma.droppedImages.delete()},status:function(e){var t=this;e.addEventListener("focus",this.editMode,!0),e.addEventListener("blur",this.viewMode,!0),Sigma.clickAndTouchListener.add(e,"manageTools",t.manageTools,!0)},target:{history:[],set add(e){this.history.push(e),this.history.length>2&&this.history.shift()},get add(){},get current(){return this.history[this.history.length-1]},get former(){return 2===this.history.length?this.history[0]:null}}}},{}],9:[function(e,t){t.exports={now:function(){var e,t=new Date,n=t.getHours(),a=t.getMinutes();12>n?e="am":(e="pm",n-=12),10>a&&(a="0"+a);var o="today "+n+":"+a+" "+e;return o},html:function(){return(new Date).toISOString()}}},{}],10:[function(e,t){t.exports=function(e){var t='[data-mongo-id="'+e+'"]',n=document.querySelector(t);null!==n&&n.parentNode.removeChild(n)}},{}],11:[function(e,t){t.exports=function(){Sigma.observers.forEach(function(e){e.disconnect()});for(var e=document.querySelectorAll("[data-sigma]"),t=0;t<e.length;++t)e[t].removeEventListener("focus",Sigma.contentEditing.editMode,!0),e[t].removeEventListener("blur",Sigma.contentEditing.viewMode,!0)}},{}],12:[function(e,t){t.exports=function(){var e=function(e,t){var n,a=document.createElement("canvas"),o=a.getContext("2d");if(t){var i,r,s,d,c=120,m=document.createElement("canvas"),u=m.getContext("2d");e.width>e.height?(i=(e.width-e.height)/2,r=0,s=e.height,d=s):e.height>e.width?(i=0,r=(e.height-e.width)/2,s=e.width,d=s):(i=r=0,s=d=e.width),a.width=a.height=c,m.width=m.height=c,u.drawImage(e,i,r,s,d,0,0,c,c),o.clearRect(0,0,c,c),o.beginPath(),o.arc(c/2,c/2,c/2-2,0,2*Math.PI,!0),o.fillStyle=o.createPattern(m,"no-repeat"),o.fill();var l=o.createLinearGradient(0,0,0,150);l.addColorStop(0,"rgba(229, 86, 109, .7)"),l.addColorStop(.25,"rgba(225, 98, 158, .7)"),l.addColorStop(.5,"rgba(195, 104, 213, .7)"),l.addColorStop(.75,"rgba(146, 94, 202, .7)"),l.addColorStop(1,"rgba(108, 83, 181, .7)"),o.lineWidth=2,o.strokeStyle=l,o.stroke(),n=a.toDataURL("image/png")}else{var g=400,h=800;e.width>h&&(e.height*=h/e.width,e.width=h),e.height>g&&(e.width*=g/e.height,e.height=g),a.width=e.width,a.height=e.height,o.clearRect(0,0,a.width,a.height),o.drawImage(e,0,0,e.width,e.height),n=a.toDataURL("image/jpeg",.7)}return n},t=function(t,n){if(t.type.match(/image.*/)){var a=document.createElement("img"),o=new FileReader;n.target.parentNode.querySelector('[data-sigma="content"]').appendChild(a),o.readAsArrayBuffer(t),o.onload=function(t){window.URL=window.URL||window.webkitURL;var n=new Blob([new Uint8Array(t.target.result)]),o=window.URL.createObjectURL(n),i=new Image;i.src=o,i.onload=function(){var t=Sigma.getTempId(),n=document.querySelector("[data-app-width]").dataset.appWidth,o=e(i,!0),r=e(i,!1);a.dataset.image="dropped",a.dataset.idType="tmp",a.dataset.mongoId=t,a.dataset.imageWidth="small"===n?"small":"large",Sigma.storeImage(t,o,r)}}}},n=function(){var e=event.dataTransfer.getData("text/plain");event.target.textContent+=" "+e};window.addEventListener("dragenter",function(e){e.preventDefault();var t=e.target.hasAttribute("data-sigma")?!0:!1;t&&e.target.focus()},!1),window.addEventListener("dragleave",function(e){e.preventDefault();var t=e.target.hasAttribute("data-sigma")?!0:!1;t&&e.target.blur()},!1),window.addEventListener("dragover",function(e){e.preventDefault()},!1),window.addEventListener("drop",function(e){e.preventDefault();var a=e.dataTransfer.files,o=e.target.hasAttribute("data-sigma")?!0:!1;if(o)if(0!==a.length)for(var i=0;i<a.length;++i)t(a[i],e);else n();e.target.focus()},!1)}},{}],13:[function(e,t){t.exports={removedImageIds:[],lookAtMutations:function(e){var t=e.addedNodes,n=e.removedNodes,a=e.type,o=this,i=function(e,t){var n=function(){e?o.removedImageIds.splice(o.removedImageIds.indexOf(t[r].dataset.mongoId),1):o.removedImageIds.push(t[r].dataset.mongoId)},i=function(e){if("#text"!==t[e].nodeName)t[e].hasAttribute("data-image")&&n();else if(t[e].hasChildNodes())for(var a=t[e].querySelectorAll("[data-image]"),o=0;o<a.length;++o)n()};if(t.length>0&&"childList"===a)for(var r=0;r<t.length;++r)i(r)};i(!1,n),i(!0,t)},"delete":function(){this.removedImageIds.length>0&&(Sigma.socket.emit("deleteImage",{ids:this.removedImageIds}),this.updateImageArray())},updateImageArray:function(){var e=this;Sigma.socket.on("updateImageArray",function(t){e.removedImageIds=t.array
})}}},{}],14:[function(e,t){t.exports=function(){Sigma.socket.on("id",function(e){Sigma.getChannelId=e.id,Sigma.listen()})}},{}],15:[function(e,t){t.exports=function(){Sigma.socket.on("history",function(e){if(e.empty){var t="Welcome here pioneer!",n="It seems that you are the very first person on that channel.";n+=void 0!==Sigma.username?" Please edit that content to make it yours!":" Please identify yourself!",Sigma.addContent(!1,void 0,t,n,Sigma.username||"Sigma")}else e.documents.forEach(function(e){Sigma.addContent(e.html,e._id)});Sigma.makeReadonly(),Sigma.highlightUserArticles(),Sigma.setObservers(),Sigma.observeWidth()})}},{}],16:[function(e,t){t.exports=function(){Sigma.socket.on("mongoId",function(e){Sigma.changeId(e.tempId,e.id,e.type)})}},{}],17:[function(e,t){t.exports=function(){Sigma.socket.on("socketMessage",function(e){Sigma.manageMessage(!0,e.message,e.type)})}},{}],18:[function(e,t){t.exports=function(){for(var e=window.crypto.getRandomValues(new Uint32Array(8)),t="",n=0;n<e.length;++n)t+=e[n].toString(16),n<e.length-1&&(t+="-");return t}},{}],19:[function(e,t){t.exports=function(){var e=document.querySelector("nav");e.classList.toggle("removeNav")}},{}],20:[function(e,t){t.exports=function(){for(var e='[data-owner="'+Sigma.username+'"]',t=document.querySelectorAll(e),n=function(e){t[e].parentNode.classList.add("isYours")},a=0;a<t.length;++a)n(a)}},{}],21:[function(e,t){t.exports=function(){Sigma.socket.on("broadcast",function(e){switch(Sigma.disconnectObservers(),e.action){case"create":Sigma.addContent(e.html,e.id);break;case"update":Sigma.updateContent(e.html,e.id);break;case"delete":Sigma.deleteContent(e.id)}Sigma.makeReadonly(),Sigma.setObservers()})}},{}],22:[function(e,t){t.exports=function(){for(var e=document.querySelectorAll("[data-sigma]"),t=function(t){var n=e[t].parentNode.querySelector("[data-owner]").dataset.owner;n!==Sigma.username&&(e[t].contentEditable="false")},n=0;n<e.length;++n)t(n)}},{}],23:[function(e,t){t.exports=function(e,t,n){var a=document.querySelector("span[class$=Message]"),o=n?"confirmationMessage":"alertMessage",i=function(){a&&a.parentNode.removeChild(a)},r=function(){if(a)a.setAttribute("class",o),a.innerHTML=t;else{var e=document.createElement("span");e.setAttribute("class",o),e.innerHTML=t;var n=document.querySelector("body");n.appendChild(e),e.addEventListener("click",function(){var e=this,t=function(){e.parentNode.removeChild(e)};this.classList.add("removeMessage"),Sigma.animationListener(!0,e,t,!0)},!1)}};e?r():i()}},{}],24:[function(e,t){t.exports=function(){var e,t=document.querySelector("[data-app-width]"),n=function(n){e[n].dataset.imageWidth=t.dataset.appWidth;var a=Sigma.host+":"+Sigma.port+"/data/"+e[n].dataset.mongoId+"/"+t.dataset.appWidth;e[n].setAttribute("src",a)},a=function(){var a=window.getComputedStyle(t,"::after").getPropertyValue("content");t.dataset.appWidth=a.replace(/\"/g,""),e=document.querySelectorAll("[data-image-width]");for(var o=0;o<e.length;++o)n(o)};Sigma.animationListener(!1,t,a,!1),a()}},{}],25:[function(e,t){t.exports=function(){window.addEventListener("paste",function(e){Sigma.manageMessage(!0,"Pasting is currently not supported due to cross-browser limitations. Use drag and drop instead.",!1),e.preventDefault()},!1)}},{}],26:[function(e,t){t.exports={pool:[],init:function(){Sigma.socket.on("saveState",function(e){void 0!==e.tempId?Sigma.saveManager.toggleState(e.tempId,e.state):void 0!==e.id&&Sigma.saveManager.toggleState(e.id,e.state)})},add:function(e,t){var n=this.find(e);null===n?this.pool.push([e,t]):this.pool[n][1]=t},find:function(e){var t=function(e){return e[0]},n=this.pool.map(t).indexOf(e);return-1!==n?n:null},showSaveState:function(){console.log("S A V E D !!!")},toggleId:function(e,t){var n=this.find(e);null!==n&&(this.pool[n][0]=t)},toggleState:function(e,t){var n=this.find(e);null!==n&&(this.pool[n][1]=t,this.showSaveState())}}},{}],27:[function(e,t){t.exports=function(){for(var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=[],n=document.querySelectorAll("[data-sigma]"),a=function(a){t[a]=new e(function(e){e.forEach(function(e){"IMG"!==e.target.nodeName&&Sigma.synchronize(),Sigma.droppedImages.lookAtMutations(e)})}),t[a].observe(n[a],{attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,subtree:!0,characterDataOldValue:!0})},o=function(e){var t=n[e].parentNode.querySelector("[data-owner]").dataset.owner;Sigma.username===t&&Sigma.contentEditing.status(n[e])},i=0;i<n.length;++i)a(i),o(i);Sigma.observers=t}},{}],28:[function(e,t){t.exports={addForm:function(){var e=this,t=document.querySelector("body"),n=document.createElement("aside"),a=document.createElement("form"),o=document.createElement("div"),i=document.createElement("div"),r=document.createElement("label"),s=document.createElement("label"),d=document.createElement("input"),c=document.createElement("input"),m=document.createElement("span"),u=document.createElement("span"),l=document.createElement("button"),g=function(e){e.preventDefault()},h=function(){var a=function(){n.parentNode.removeChild(n)};Sigma.animationListener(!0,n,a,!0),n.classList.add("removeAside"),t.classList.remove("noScroll"),Sigma.hideOrShowNav(),t.removeEventListener("mousewheel",g,!1),t.removeEventListener("touchmove",g,!1),e.isVisible=!1};a.setAttribute("class","signIn"),a.setAttribute("data-validation","Username and password must be 6 characters long with no white space! Password must contain at least 1 digit!"),o.setAttribute("class","usernameUberInput"),i.setAttribute("class","passwordUberInput"),d.setAttribute("class","username"),d.setAttribute("type","text"),d.setAttribute("placeholder","Username"),d.setAttribute("autofocus",""),c.setAttribute("class","password"),c.setAttribute("type","password"),c.setAttribute("placeholder","Password"),m.setAttribute("id","usernameInputState"),u.setAttribute("id","passwordInputState"),l.setAttribute("type","button"),l.setAttribute("class","cancel"),l.appendChild(document.createTextNode("cancel")),t.classList.toggle("noScroll"),t.insertBefore(n,t.firstChild),n.appendChild(a),a.appendChild(o),a.appendChild(i),o.appendChild(r),o.appendChild(d),o.appendChild(m),i.appendChild(s),i.appendChild(c),i.appendChild(u),a.appendChild(l),Sigma.signIn.form=a,t.addEventListener("mousewheel",g,!1),t.addEventListener("touchmove",g,!1),l.addEventListener("click",h,!1)},checkForm:function(){var e=(document.querySelector("form"),document.querySelector(".username").value),t=document.querySelector(".password").value,n=document.querySelector("#usernameInputState"),a=document.querySelector("#passwordInputState"),o=new RegExp("^\\S{6,}$"),i=o.test(e),r=new RegExp("^(?=.*\\d)\\S{6,}$"),s=r.test(t),d=i&&s,c="",m=function(e){var t=document.querySelector("button[type=submit]");if(e){if(!t){var n=document.createElement("button");n.setAttribute("type","submit"),n.appendChild(document.createTextNode("sign in | up")),Sigma.signIn.form.appendChild(n)}}else t&&t.parentNode.removeChild(t)};d?(Sigma.signIn.username=e,Sigma.signIn.password=t,n.className=a.className="isOk",Sigma.manageMessage(!1),m(!0)):(i?""!==e&&(n.className="isOk"):""!==e?(c+="Username must be at least 6 characters long!",n.className="isErroneous"):n.className="",s?""!==t&&(a.className="isOk"):""!==t?(""!==c&&(c+=" "),c+="Password must be at least 6 characters long with one digit!",a.className="isErroneous"):a.className="",""!==c?Sigma.manageMessage(!0,c,!1):Sigma.manageMessage(!1),m(!1))},submit:function(e){e.preventDefault(),Sigma.socket.emit("signIn",{username:Sigma.signIn.username,password:Sigma.signIn.password})},init:function(){this.isVisible=!0,this.addForm(),this.form.addEventListener("input",this.checkForm,!1),this.form.addEventListener("submit",this.submit,!1)}}},{}],29:[function(e,t){t.exports={submit:function(e){e.preventDefault(),Sigma.socket.emit("signUp",{username:Sigma.signIn.username,password:Sigma.signIn.password})},init:function(){Sigma.socket.on("signUp",function(e){Sigma.manageMessage(!0,"Unknown username! Want to sign up as "+e.username+"?",!0);var t=document.querySelector("button[type=submit]");t.innerText="sign up",t.classList.add("signUp"),Sigma.signIn.form.removeEventListener("submit",Sigma.signIn.submit,!1),Sigma.signIn.form.addEventListener("submit",Sigma.signUp.submit,!1)})}}},{}],30:[function(e,t){t.exports={i:0,get value(){return++this.i,this.i}}},{}],31:[function(e,t){t.exports=function(e,t,n){Sigma.socket.emit("storeImage",{tempId:e,smallImage:t,largeImage:n})}},{}],32:[function(e,t){t.exports=function(){var e,t,n,a,o=document.activeElement.parentNode,i=o.cloneNode(!0),r=document.createDocumentFragment(),s="HTML"!==o.nodeName,d=function(e){a[e].removeAttribute("src"),a[e].removeAttribute("[data-image-width]")};r.appendChild(i),t=r.querySelector(".tools"),null!==t&&t.parentNode.removeChild(t),n=r.querySelector('[data-structure="article"]').innerHTML,a=r.querySelectorAll("[data-image-width]");for(var c=0;c<a.length;++c)d(c);document.hasFocus()&&s&&(o.hasAttribute("data-mongo-id")?"const"===o.dataset.idType?(e=o.dataset.mongoId,Sigma.socket.emit(Sigma.getChannelId,{action:"update",mongoId:e,html:n,owner:Sigma.username})):console.log("berp"):(o.dataset.idType="tmp",e=Sigma.getTempId(),o.dataset.mongoId=e,Sigma.socket.emit(Sigma.getChannelId,{action:"create",mongoId:e,html:n,owner:Sigma.username})),Sigma.saveManager.add(e,!1))}},{}],33:[function(e,t){t.exports=function(){if("localStorage"in window){var e=localStorage.getItem("username"),t=function(){console.log(event)};null!==e?(Sigma.username=e,Sigma.connectOrCreateButton(!1),Sigma.manageMessage(!0,"Hi "+Sigma.username+"! Nice to see you there!",!0)):(Sigma.connectOrCreateButton(!0),Sigma.addHeroHeader(),Sigma.userIsConnected()),window.addEventListener("storage",t,!1)}}},{}],34:[function(e,t){t.exports=function(e,t){var n='[data-mongo-id="'+t+'"]',a=document.querySelector(n);null!==a&&(a.innerHTML=e)}},{}],35:[function(e,t){t.exports=function(){Sigma.socket.on("isConnected",function(e){var t=document.querySelector("aside");t.parentNode.removeChild(t),Sigma.username=e.username,"localStorage"in window&&localStorage.setItem("username",Sigma.username),Sigma.connectOrCreateButton(!1),Sigma.highlightUserArticles(),Sigma.manageMessage(!0,"Hi "+Sigma.username+"! Nice to see you there!",!0)})}},{}]},{},[1]);